<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="pl" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Nagłówki, sesje i ciasteczka - Samouczek Programisty</title>
<meta name="description" content="W pierwszej części artykułu opisującej serwlety dowiedziałeś się podstaw dotyczących serwletów. W tym artykule będziesz mógł poszerzyć tę wiedzę. Dowiesz się jakie możliwości dają klasy HttpServletRequest i HttpServletResponse. Wyjaśnię Ci czym jest sesja i jak pracować z HttpSession. Przeczytasz także o nagłówkach i ciasteczkach, nauczysz się tworzyć je samodzielnie. Na końcu czeka także ćwiczenie, w którym zastosujesz wiedzę w praktyce. Zapraszam do lektury.">


  <meta name="author" content="Marcin Pietraszek">


<meta property="og:type" content="article">
<meta property="og:locale" content="pl">
<meta property="og:site_name" content="Samouczek Programisty">
<meta property="og:title" content="Nagłówki, sesje i ciasteczka">
<meta property="og:url" content="https://www.samouczekprogramisty.pl/naglowki-sesje-i-ciasteczka/">


  <meta property="og:description" content="W pierwszej części artykułu opisującej serwlety dowiedziałeś się podstaw dotyczących serwletów. W tym artykule będziesz mógł poszerzyć tę wiedzę. Dowiesz się jakie możliwości dają klasy HttpServletRequest i HttpServletResponse. Wyjaśnię Ci czym jest sesja i jak pracować z HttpSession. Przeczytasz także o nagłówkach i ciasteczkach, nauczysz się tworzyć je samodzielnie. Na końcu czeka także ćwiczenie, w którym zastosujesz wiedzę w praktyce. Zapraszam do lektury.">



  <meta property="og:image" content="https://www.samouczekprogramisty.pl/assets/images/2017/04/01_naglowki_ciasteczka_sesje_artykul.jpeg">





  <meta property="article:published_time" content="2017-04-01T00:00:00+02:00">



  <meta property="article:modified_time" content="2018-07-18T20:43:32+02:00">



  

  


<link rel="canonical" href="https://www.samouczekprogramisty.pl/naglowki-sesje-i-ciasteczka/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Marcin Pietraszek",
      "url": "https://www.samouczekprogramisty.pl/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Samouczek Programisty Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <link rel="shortcut icon" href="/assets/images/favicon.ico" /> 
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Samouczek Programisty
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/kurs-programowania-java/">Kurs programowania Java</a>
            </li><li class="masthead__menu-item">
              <a href="/kurs-aplikacji-webowych/">Kurs aplikacji webowych</a>
            </li><li class="masthead__menu-item">
              <a href="/kurs-sql/">Kurs SQL</a>
            </li><li class="masthead__menu-item">
              <a href="/kontakt/">Kontakt</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Przełącz menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/2017/04/01_naglowki_ciasteczka_sesje_artykul.jpeg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Nagłówki, sesje i ciasteczka

        
      </h1>
      
        <p class="page__lead">W pierwszej części artykułu opisującej serwlety dowiedziałeś się podstaw dotyczących serwletów. W tym artykule będziesz mógł poszerzyć tę wiedzę. Dowiesz się jakie możliwości dają klasy <code class="highlighter-rouge">HttpServletRequest</code> i <code class="highlighter-rouge">HttpServletResponse</code>. Wyjaśnię Ci czym jest sesja i jak pracować z <code class="highlighter-rouge">HttpSession</code>. Przeczytasz także o nagłówkach i ciasteczkach, nauczysz się tworzyć je samodzielnie. Na końcu czeka także ćwiczenie, w którym zastosujesz wiedzę w praktyce. Zapraszam do lektury.
</p>
      
      
        <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  10 minut(y)

</p>
      
      
      
    </div>
  
  
    <span class="page__hero-caption"><a href="https://www.flickr.com/photos/nitot/6124595416/sizes/l">© nitot</a>
</span>
  
</div>




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://www.samouczekprogramisty.pl/" itemprop="item"><span itemprop="name">Strona główna</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Nagłówki, sesje i ciasteczka</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Nagłówki, sesje i ciasteczka">
    <meta itemprop="description" content="W pierwszej części artykułu opisującej serwlety dowiedziałeś się podstaw dotyczących serwletów. W tym artykule będziesz mógł poszerzyć tę wiedzę. Dowiesz się jakie możliwości dają klasy HttpServletRequest i HttpServletResponse. Wyjaśnię Ci czym jest sesja i jak pracować z HttpSession. Przeczytasz także o nagłówkach i ciasteczkach, nauczysz się tworzyć je samodzielnie. Na końcu czeka także ćwiczenie, w którym zastosujesz wiedzę w praktyce. Zapraszam do lektury.">
    <meta itemprop="datePublished" content="April 01, 2017">
    <meta itemprop="dateModified" content="July 18, 2018">

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        <aside class="sidebar__right ">
          
          <nav class="toc">
            <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Spis treści</h4></header>
            <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#wprowadzenie">Wprowadzenie</a></li>
<li class="toc-entry toc-h2"><a href="#httpservletrequest">HTTPServletRequest</a>
<ul>
<li class="toc-entry toc-h3"><a href="#parametry-url">Parametry URL</a>
<ul>
<li class="toc-entry toc-h4"><a href="#żądania-post-a-parametry">Żądania POST a parametry</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#adres-url">Adres URL</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#httpservletresponse">HttpServletResponse</a></li>
<li class="toc-entry toc-h2"><a href="#nagłówki">Nagłówki</a>
<ul>
<li class="toc-entry toc-h3"><a href="#zastosowanie-nagłówków">Zastosowanie nagłówków</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#ciasteczka">Ciasteczka</a>
<ul>
<li class="toc-entry toc-h3"><a href="#zastosowanie-ciasteczek">Zastosowanie ciasteczek</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#sesja">Sesja</a>
<ul>
<li class="toc-entry toc-h3"><a href="#czas-trwania-sesji">Czas trwania sesji</a></li>
<li class="toc-entry toc-h3"><a href="#atrybuty-sesji">Atrybuty sesji</a></li>
<li class="toc-entry toc-h3"><a href="#mechanizm-przechowywania-sesji">Mechanizm przechowywania sesji</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#ćwiczenie-do-wykonania">Ćwiczenie do wykonania</a></li>
<li class="toc-entry toc-h2"><a href="#dodatkowe-materiały-do-nauki">Dodatkowe materiały do nauki</a></li>
<li class="toc-entry toc-h2"><a href="#podsumowanie">Podsumowanie</a></li>
</ul>
          </nav>
          <hr />
          
          <div class="mailerlite__form">
            <script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698980/y1i5k0.js?v7"></script>
          </div>
          <hr />
          <div class="fb-page">
            <a href="https://www.facebook.com/SamouczekProgramisty"><img src="/assets/images/facebook_logo.gif" alt="Profil Samouczka na Facebooku"/></a>
          </div>
        </aside>
        <h2 id="wprowadzenie">Wprowadzenie</h2>

<p>Zacznijmy od żądań i odpowiedzi. Wiesz już, o hierarchii dziedziczenia serwletów <code class="highlighter-rouge">Servlet</code>, <code class="highlighter-rouge">GenericServlet</code> i <code class="highlighter-rouge">HttpServlet</code>. W przypadku klasy opakowującej żądanie i odpowiedź sytuacja wygląda podobnie. Istnieją bazowe interfejsy <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html"><code class="highlighter-rouge">ServletRequest</code></a> i <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletResponse.html"><code class="highlighter-rouge">ServletResponse</code></a>.</p>

<p>W przypadku serwletów opartych o protokół HTTP interfejsy te są rozszerzane przez <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html"><code class="highlighter-rouge">HttpServletRequest</code></a> i <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html"><code class="highlighter-rouge">HttpServletResponse</code></a>. Rozszerzone interfejsy zawierają metody specyficzne dla protokołu HTTP.</p>

<p>Zauważ, że piszę tu wyłącznie o interfejsach. Są to interfejsy określone przez specyfikację serwletów. Kontener serwletów, który implementuję tę specyfikację dostarcza także konkretnych implementacji. To właśnie kontener odpowiedzialny jest za tworzenie instancji klas, które implementują te interfejsy.</p>

<p>Z <a href="/serwlety-w-aplikacjach-webowych/">poprzedniego artykułu opisującego serwlety</a> wiesz już z jakich elementów składa się adres URL. Klasy opakowujące żądanie pozwalają na pracę z poszczególnymi elementami adresu URL. Jedą z części tego adresu są parametry.</p>

<p class="notice--warning">W artykule i przykładach używam bardzo prostego mechanizmu do generowania widoków. Nie jest to sposób “poprawny”. To są jedynie przykłady, które mają wprowadzić Cię w “świat aplikacji webowych”. W kolejnych artykułach poznasz lepszą metodę na generowanie stron HTML.</p>

<h2 id="httpservletrequest"><code class="highlighter-rouge">HTTPServletRequest</code></h2>

<h3 id="parametry-url">Parametry URL</h3>

<p>Jedną z części adresu URL są parametry. Są one dostępne po znaku <code class="highlighter-rouge">?</code>. Parametry zapisane są w formie klucz=wartość, z tym że jeden parametr może wystąpić wiele razy. Poszczególne pary klucz=wartość rozdzielone są znakami <code class="highlighter-rouge">&amp;</code>.</p>

<p>W interfejsie <code class="highlighter-rouge">HttpServletRequest</code> istnieje kilka metod, które pozwalają na pracę z parametrami. Proszę spójrz na przykład poniżej.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/parameters"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ParametersServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">PrintWriter</span> <span class="n">responseWriter</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;html&gt;&lt;body&gt;"</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">[]&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameterMap</span><span class="o">().</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;p&gt;"</span> <span class="o">+</span> <span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">())</span> <span class="o">+</span><span class="s">"&lt;/p&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;/body&gt;&lt;/html&gt;"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>W przykładzie tym widzisz serwlet, który w odpowiedzi wypisuje wszystkie parametry z adresu URL żądania. Poza metodą <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameterMap--"><code class="highlighter-rouge">getParameterMap</code></a> możesz użyć także kilku innych:</p>
<ul>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter-java.lang.String-"><code class="highlighter-rouge">getParameter()</code></a></li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameterNames--"><code class="highlighter-rouge">getParameterNames()</code></a></li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameterValues-java.lang.String-"><code class="highlighter-rouge">getParameterValues()</code></a></li>
</ul>

<p>Po uruchomieniu aplikacji, która posiada taki serwlet i wpisaniu w przeglądarce adresu</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://localhost:8080/02_serwlety/parameters?parameter1=value1&amp;parameter2=value2&amp;parameter1=value11
</code></pre></div></div>

<p>Powinna wyświetlić się strona zawierająca dwie linijki:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parameter2: [value2]
parameter1: [value1, value11]
</code></pre></div></div>

<h4 id="żądania-post-a-parametry">Żądania POST a parametry</h4>

<p>Powyżej opisałem sytuację, w której parametry przesyłane są jako fragment adresu URL żądania. Dzieje się tak w przypadku żądań typu GET. W przypadku wysyłania formularzy (zazwyczaj zapytania typu POST), parametry te przesyłane są w ciele żądania. Nie są one częścią adresu.</p>

<p>Mimo tego, że parametry przesyłane są w inny sposób możesz z nimi pracować używając tego samego zestawu metod.</p>

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań algorytmicznych z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 6147 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/704312/f8q4i2.js?v4"></script>


</div>

<h3 id="adres-url">Adres URL</h3>

<p>Obiekt opakowujący żądanie pozwala także na pracę z adresem URL, którego żądanie dotyczy. Zestaw metod pozwala na pobranie informacji na temat adresu żądania:</p>
<ul>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getContextPath--"><code class="highlighter-rouge">getContextPath()</code></a> zwraca fragment ścieżki, która jest “podstawą” wszystkich ścieżek obsługiwanych przez daną aplikację. W przypadku prostego instalowania aplikacji przy pomocy gradle będzie to nazwa pliku war,</li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getServletPath--"><code class="highlighter-rouge">getServletPath()</code></a> zwraca fragment ścieżki, która została użyta w konfiguracji serwletu,</li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getRequestURL--"><code class="highlighter-rouge">getRequestURL()</code></a> metoda zwraca adres URL żądania bez parametrów zawartych w adresie,</li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getRequestURI--"><code class="highlighter-rouge">getRequestURI()</code></a> zwraca adres URI (ang. <em>Uniform Resource Identifier</em>). Od aresu URL różni się on tym, że nie zawiera protokołu, serwera i portu.</li>
</ul>

<p>Zakładając, że nasz sewlet obsługuje ścieżkę /path wówczas wywołanie powyższych metod po żądaniu</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://localhost:8080/02_serwlety/path?xxx=yyy
</code></pre></div></div>

<p>Powinno zwrócić następujące wartości:</p>
<ul>
  <li><code class="highlighter-rouge">getContextPath() /02_serwlety</code></li>
  <li><code class="highlighter-rouge">getServletPath() /path</code></li>
  <li><code class="highlighter-rouge">getRequestURI() /02_serwlety/path</code></li>
  <li><code class="highlighter-rouge">getRequestURL() http://localhost:8080/02_serwlety/path</code></li>
</ul>

<p>Przykładowy serwlet, który używa tych metod możesz znaleźć na <a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe/blob/master/02_serwlety/src/main/java/pl/samouczekprogramisy/kursaplikacjewebowe/servlets/PathServlet.java">samouczkowym githubie</a>.</p>
<h2 id="httpservletresponse"><code class="highlighter-rouge">HttpServletResponse</code></h2>

<p>Obiekt, implementujący ten interfejs także tworzony jest przez kontener serwletów. Służy on do przygotowania odpowiedzi na żądanie wysłane do serwera. W przypadku obiektu odpowiedzi musisz wiedzieć o następujących metodach</p>
<ul>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletResponse.html#getOutputStream--"><code class="highlighter-rouge">getOutputStream()</code></a> zwraca instancję <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletOutputStream.html"><code class="highlighter-rouge">ServletOutputStream</code></a>, która służy do tworzenia odpowiedzi zawierającej dane binarne,</li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletResponse.html#getWriter--"><code class="highlighter-rouge">getWriter()</code></a> zwraca instancję <code class="highlighter-rouge">PrintWriter</code>, która służy do tworzenia odpowiedzi zawierającej tekst.</li>
</ul>

<p>Ważne jest aby pamiętać, że w trakcie obsługi żądania możemy posługiwać się wyłącznie jedną z tych metod.</p>
<h2 id="nagłówki">Nagłówki</h2>

<p>Specyfikacja protokołu HTTP definiuje tak zwane nagłówki. Nagłówki dołączane są zarówno do żądań jak i odpowiedzi. Nagłówki to nic innego jak pary klucz-wartość, które zapisane są w formacie <code class="highlighter-rouge">nazwa nagłówka: treść nagłówka</code>. Na przykład</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Content-Type: text/html; charset=utf-8
Content-Length: 13358
</code></pre></div></div>

<p>Przeglądarki internetowe posiadają wbudowane “narzędzia developerskie”, które pozwalają na podejrzenie nagłówków. Jeśli chcesz dowiedzieć się więcej o tych narzędziach zachęcam do odwiedzenia strony dedykowanej dla Twojej przeglądarki</p>
<ul>
  <li><a href="https://developer.mozilla.org/en-US/docs/Tools">Firefox</a></li>
  <li><a href="https://developer.chrome.com/devtools">Chrome</a></li>
  <li><a href="http://www.opera.com/dragonfly/">Opera</a></li>
  <li><a href="https://docs.microsoft.com/en-us/microsoft-edge/f12-devtools-guide">Internet Explorer</a></li>
</ul>

<figure class="">
  <img src="/assets/images/2017/04/01_headers.jpg" alt="" />
  
    <figcaption>
      Narzędzia developerskie – nagłówki

    </figcaption>
  
</figure>

<p>Obiekty <code class="highlighter-rouge">HttpServletResponse</code> i <code class="highlighter-rouge">HttpServletRequest</code> pozwalają na pracę z nagłówkami przy pomocy metod:</p>

<ul>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html#setHeader-java.lang.String-java.lang.String-"><code class="highlighter-rouge">setHeader()</code></a></li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html#addHeader-java.lang.String-java.lang.String-"><code class="highlighter-rouge">addHeader()</code></a></li>
</ul>

<p>Pierwsza z nich ustawia wartość nagłówka, druga dodaje nową wartość nagłówka (i tworzy go jeśli wcześniej nie był ustawiony). W rzeczywistości nagłówek mający wiele wartości to dalej jedna para klucz-wartość. W tym przypadku wartość zawiera kilka elementów oddzielonych przecinkami.</p>

<p>Nagłówki możesz pobierać z obiektu żądania używając metod:</p>

<ul>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getHeaderNames--"><code class="highlighter-rouge">getHeaderNames()</code></a></li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html#getHeader-java.lang.String-"><code class="highlighter-rouge">getHeader()</code></a></li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getHeaders-java.lang.String-"><code class="highlighter-rouge">getHeaders()</code></a></li>
</ul>

<p>Poniższy serwlet używa tych metod aby ustawić kilka nagłówków. W odpowiedzi na żądanie tworzy stronę, która zawiera listę ustawionych nagłówków. Jak zwykle mocno zachęcam do eksperymentowania, sam zobacz jak taki serwlet działa.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="nc">PrintWriter</span> <span class="n">responseWriter</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
 
    <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;html&gt;&lt;body&gt;"</span><span class="o">);</span>
    <span class="nc">Enumeration</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">headerNames</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getHeaderNames</span><span class="o">();</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">headerNames</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">())</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">headerName</span> <span class="o">=</span> <span class="n">headerNames</span><span class="o">.</span><span class="na">nextElement</span><span class="o">();</span>
        <span class="nc">Enumeration</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">headerValues</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getHeaders</span><span class="o">(</span><span class="n">headerName</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">headerValues</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">headerValue</span> <span class="o">=</span> <span class="n">headerValues</span><span class="o">.</span><span class="na">nextElement</span><span class="o">();</span>
            <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;p&gt;"</span> <span class="o">+</span> <span class="n">headerName</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">headerValue</span> <span class="o">+</span> <span class="s">"&lt;/p&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
 
    <span class="n">resp</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"my-custom-header"</span><span class="o">,</span> <span class="s">"value1"</span><span class="o">);</span>
    <span class="n">resp</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"my-custom-header"</span><span class="o">,</span> <span class="s">"value2"</span><span class="o">);</span>
    <span class="n">resp</span><span class="o">.</span><span class="na">setIntHeader</span><span class="o">(</span><span class="s">"my-custom-int-header"</span><span class="o">,</span> <span class="mi">123</span><span class="o">);</span>
 
    <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;/body&gt;&lt;/html&gt;"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="zastosowanie-nagłówków">Zastosowanie nagłówków</h3>

<p>Nagłówki jako część protokołu HTTP pełnią bardzo istotną rolę. Dla przykładu poniżej pokazuję zestaw nagłówków wysyłanych wraz z każdą odpowiedzią dla adresu www.samouczekprogramisty.pl:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl -I www.samouczekprogramisty.pl
HTTP/1.1 200 OK
Set-Cookie: PHPSESSID=xxxxxxxxxxxxxxxxxxxxxx; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Type: text/html; charset=UTF-8
Link: &lt;https://www.samouczekprogramisty.pl/wp-json/&gt;; rel="https://api.w.org/"
Date: Sun, 02 Apr 2017 10:46:08 GMT
Accept-Ranges: bytes
Server: LiteSpeed
Connection: Keep-Alive
</code></pre></div></div>

<p>Użyłem do tego programu <code class="highlighter-rouge">curl</code>, który pozwala na wysyłanie żądań HTTP z linii poleceń. Fragment powyżej powoduje wysłanie żądania typu HEAD, które zwraca wyłącznie nagłówki (bez właściwej zawartości strony). Przykładowe zastosowanie nagłówków:</p>
<ul>
  <li>Pozwalają na ustawianie ciasteczek (przeczytasz o nich w kolejnym akapicie) (<code class="highlighter-rouge">Set-Cookie</code>),</li>
  <li>Pozwalają na określenie zawartości strony. To dzięki nim przeglądarka wie jak interpretować odpowiedź, którą dostanie. To nagłówek określa czy w odpowiedzi znajduje się plik HTML (<code class="highlighter-rouge">Content-Type: text/html; charset=UTF-8</code>). Czy może są dane binarne reprezentujące obrazek do wyświetlenia (<code class="highlighter-rouge">Content-Type: image/jpeg</code>),</li>
  <li>Mogą przyspieszyć ładowanie strony w przeglądarce. Jeśli odwiedziłeś już jakąś stronę to przeglądarka mogła zapisać część danych, które wyświetliła (w tym część nagłówków). Następnym razem nie wyśle żądania typu GET (aby pobrać całą zawartość) a jedynie HEAD (aby pobrać nagłówki). Po sprawdzeniu nagłówków stwierdzi, że dane się nie zmieniły i wyświetli poprzednio zapamiętaną zawartość (<code class="highlighter-rouge">Cache-Control: public, max-age=63115200</code>, <code class="highlighter-rouge">Last-Modified: Thu, 16 Mar 2017 17:12:14 GMT</code>).</li>
  <li>Takie sprawdzenie może odbyć się też w inny sposób. Przeglądarka może wysłać zapytanie typu GET dołączając odpowiednie nagłówki. Później żądanie z nagłówkami interpretowane jest przez serwer. Jeśli serwer stwierdzi, że przeglądarka ma aktualną treść (potwierdza to nagłówek), wówczas wysyła odpowiedź informującą przeglądarkę, że jej kopia treści jest najnowsza. W takim przypadku zamiast przesyłać przez sieć obrazek o wielkości 400kB wysyła odpowiedź, która ma dużo mniej danych – kilka kilobajtów (<code class="highlighter-rouge">ETag: "9db5f14aeaa00872"</code>,</li>
  <li>Nagłówki to metadane (dane o danych). Zdarza się, że są wykorzystywane do przesyłania dodatkowych informacji na temat danego żądania/odpowiedzi.</li>
</ul>

<p>Mimo tego, że nagłówki są powszechnie stosowane w codziennej pracy z aplikacjami webowymi (szczególnie na początku) nie są one “kluczowe”. Większość z nich ustawiają za nas biblioteki zewnętrzne. Niemniej jednak dobrze jest wiedzieć o tym, że istnieją i do czego służą.</p>

<h2 id="ciasteczka">Ciasteczka</h2>

<p>Ciasteczka to mechanizm opisany w specyfikacji protokołu HTTP. W uproszczeniu można powiedzieć, że ciasteczka to informacje, które dołączane są do żądania i mogą być ustawiane w odpowiedzi. Ciasteczka połączone są z adresem, pod który wysyłane jest żądanie. Przeglądarka internetowa wysyłając żądanie pod adres www.samouczekprogramisty.pl wyszukuje jakie ciasteczka ma zapisane dla tej domeny i dołącza je automatycznie do każdego żądania.</p>

<figure class="">
  <img src="/assets/images/2017/04/01_ciasteczka-diagram.jpeg" alt="" />
  
    <figcaption>
      Ciasteczka – diagram

    </figcaption>
  
</figure>

<p>Po stronie serwera, w odpowiedzi można ustawiać ciasteczka. Można to robić przy pomocy nagłówka <code class="highlighter-rouge">Set-Cookie</code>. Z racji tego, że jest to bardzo popularny mechanizm istnieje osobny zestaw metod, które pomagają pracować z ciasteczkami:</p>

<ul>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html#addCookie-javax.servlet.http.Cookie-"><code class="highlighter-rouge">addCookie()</code></a></li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getCookies--"><code class="highlighter-rouge">getCookies()</code></a></li>
</ul>

<p>Samo ciasteczko reprezentowane jest przez klasę <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/Cookie.html"><code class="highlighter-rouge">Cookie</code></a>. Podstawowymi atrybutami ciasteczka jest jego nazwa i wartość.</p>

<p>Dodatkowo możesz ustawić też inne atrybuty, takie jak czas życia ciasteczka. Jeśli jest on ustawiony, wówczas przeglądarka dołącza ciasteczka do żądań tak długo jak są one “ważne”.</p>

<p>Przykładowy serwlet poniżej w odpowiedzi generuje stronę, która wyświetla wszystkie dostępne ciasteczka. Ustawia też jedno ciasteczko o nazwie custom-cookie, jego czas życia ustawiony jest na 10 sekund.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="nc">PrintWriter</span> <span class="n">responseWriter</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
 
    <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;html&gt;&lt;body&gt;"</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Cookie</span> <span class="n">cookie</span> <span class="o">:</span> <span class="n">req</span><span class="o">.</span><span class="na">getCookies</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;p&gt;"</span> <span class="o">+</span> <span class="n">cookie</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">cookie</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&lt;/p&gt;"</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="nc">Cookie</span> <span class="n">cookie</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cookie</span><span class="o">(</span><span class="s">"custom-cookie"</span><span class="o">,</span> <span class="s">"bum bum cyk cyk"</span><span class="o">);</span>
    <span class="n">cookie</span><span class="o">.</span><span class="na">setMaxAge</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
    <span class="n">resp</span><span class="o">.</span><span class="na">addCookie</span><span class="o">(</span><span class="n">cookie</span><span class="o">);</span>
 
    <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;/body&gt;&lt;/html&gt;"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Przy drugim otworzeniu strony generowanej przez ten serwlet<sup id="fnref:czas" role="doc-noteref"><a href="#fn:czas" class="footnote">1</a></sup> zobaczysz ciasteczko custom-cookie</p>

<p>Wcześniej opisane narzędzia developerskie dostępne w przeglądarkach internetowych pozwalają na podejrzenie zawartości ciasteczek.</p>

<figure class="">
  <img src="/assets/images/2017/04/01_cookies.png" alt="" />
  
    <figcaption>
      Narzędzia developerskie – ciasteczka

    </figcaption>
  
</figure>

<h3 id="zastosowanie-ciasteczek">Zastosowanie ciasteczek</h3>

<p>Jak wiesz z poprzedniego artykułu protokół HTTP jest bezstanowy. Ciasteczka pomagają obejść tę właściwość. Bardzo często ciasteczka wykorzystywane są do zapisania informacji czy użytkownik jest zalogowany w aplikacji. Aplikacja sprawdza czy takie ciasteczko istnieje, jeśli tak udostępnia użytkownikowi jakieś dane. Jeśli ciasteczka brakuje wówczas przekierowuje go na stronę logowania.</p>

<p>Po zalogowaniu aplikacja ustawia ciasteczko, które następnie dołączane jest do kolejnych żądań automatycznie.</p>

<p>Użytkownik ma możliwość ustawienia przeglądarki internetowej w ten sposób aby nie zapamiętywała ciasteczek. Nie jest to popularne, ale warto wiedzieć, że jest taka możliwość.</p>

<p>Podobnie jak w przypadku nagłówków – w codziennej pracy z aplikacjami webowymi często nie używa się ciasteczek bezpośrednio. Dzieje się to niejako “pod spodem” - zewnętrzne biblioteki wykorzystują ten mechanizm.</p>

<h2 id="sesja">Sesja</h2>

<p>Można powiedzieć, że sesja to połączenie kilku żądań/odpowiedzi w jedną całość. Dzięki temu aplikacja webowa może powiązać te żądania z jednym użytkownikiem. Sesje najczęściej zaimplementowane są przy pomocy ciasteczek. Specyfikacja serwletów określa nawet domyślną nazwę takiego ciasteczka – jest to <code class="highlighter-rouge">JSESSIONID</code>.</p>

<p>Innym mechanizmem, na którym może być oparta sesja jest przepisywanie adresu URL (ang. <em>URL rewriting</em>). Polega ono na dołączaniu identyfikatora sesji do adresu. W takim przypadku adres może wyglądać następująco <code class="highlighter-rouge">https://www.samouczekprogramisty.pl/kurs-programowania-java;jsessionid=1234</code>. To kontener serwletów decyduje o metodzie, która powinna być użyta do “podtrzymywania” sesji.</p>

<p>Podobnie jak w przypadku ciasteczek sesja ma swój dedykowany obiekt. Po stronie serwera sesja reprezentowana jest przez <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html"><code class="highlighter-rouge">HttpSession</code></a>.</p>

<h3 id="czas-trwania-sesji">Czas trwania sesji</h3>

<p>Sesja nie jest trzymana wiecznie. To jak długo powinna być utrzymywana przez kontener serwletów określone jest przez parametr metody <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html#setMaxInactiveInterval-int-"><code class="highlighter-rouge">setMaxInactiveInterval</code></a>. Określa on w sekundach jak długo pomiędzy żądaniami klienta sesjsa powinna być utrzymywana.</p>

<h3 id="atrybuty-sesji">Atrybuty sesji</h3>

<p>Sesję można porównać do mapy, w której przechowujemy pary klucz-wartość. Są to atrybuty sesji. Dzięki nim mamy możliwość przekazywania informacji wewnątrz aplikacji webowej pomiędzy żądaniami klienta. Poniższy zestaw metod pozwala na pracę z atrybutami sesji:</p>
<ul>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html#getAttributeNames--"><code class="highlighter-rouge">getAttributeNames()</code></a></li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html#getAttribute-java.lang.String-"><code class="highlighter-rouge">getAttribute()</code></a></li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html#removeAttribute-java.lang.String-"><code class="highlighter-rouge">removeAttribute()</code></a></li>
  <li><a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html#setAttribute-java.lang.String-java.lang.Object-"><code class="highlighter-rouge">setAttribute()</code></a></li>
</ul>

<p>Wartościami atrybutów są obiekty, jednak musisz pamiętać o tym aby nie były one “duże”. Atrybuty sesji powinny być także serializowalne. Jeśli nie miałeś do czynienia z serializacją zapraszam do artykułu poświęconemu <a href="/serializacja-w-jezyku-java/">serializacji w języku Java</a>.</p>

<h3 id="mechanizm-przechowywania-sesji">Mechanizm przechowywania sesji</h3>

<p>Sesje mogą być przechowywane w pamięci kontenera serwletów. Nie jest to jedyna metoda ich przechowywania. Naiwny mechanizm może być oparty o ciasteczka, w takim przypadku wszystkie atrybuty sesji byłyby ciasteczkami.</p>

<p>Kontener serwletów do zapisywania sesji może użyć standardowych plików. Sesja może być także zapisana w różnych bazach danych. To w jaki sposób będzie to realizowane zależy od konfiguracji kontenera serwletów. W podstawowych przypadkach nie musisz się przejmować tą konfiguracją.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/session"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SessionServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">VISIT_COUNTER_ATTR</span> <span class="o">=</span> <span class="s">"visitCounter"</span><span class="o">;</span>
 
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">PrintWriter</span> <span class="n">responseWriter</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
 
        <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;html&gt;&lt;body&gt;"</span><span class="o">);</span>
 
        <span class="nc">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
        <span class="nc">Enumeration</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">attributeNames</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getAttributeNames</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">attributeNames</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">attributeName</span> <span class="o">=</span> <span class="n">attributeNames</span><span class="o">.</span><span class="na">nextElement</span><span class="o">();</span>
            <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;p&gt;"</span> <span class="o">+</span> <span class="n">attributeName</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="n">attributeName</span><span class="o">)</span> <span class="o">+</span> <span class="s">"&lt;/p&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;/body&gt;&lt;/html&gt;"</span><span class="o">);</span>
        <span class="n">increaseVisitCounter</span><span class="o">(</span><span class="n">session</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">increaseVisitCounter</span><span class="o">(</span><span class="nc">HttpSession</span> <span class="n">session</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Object</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="no">VISIT_COUNTER_ATTR</span><span class="o">);</span>
        <span class="nc">Integer</span> <span class="n">numberOfVisits</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">counter</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">numberOfVisits</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Integer</span><span class="o">)</span> <span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="n">numberOfVisits</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="no">VISIT_COUNTER_ATTR</span><span class="o">,</span> <span class="n">numberOfVisits</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="ćwiczenie-do-wykonania">Ćwiczenie do wykonania</h2>

<p>Napisz serwlet, który pobierze wartość wszystkich parametrów przekazanych w adresie. Pobierze wszystkie parametry, których wartości są liczbami całkowitymi, następnie sumę tych parametrów wyświetli na ekranie. Serwlet ten powinien dodatkowo w sesji zapamiętać sumaryczną wartość wszystkich takich operacji. Ta całkowita suma także powinna być wyświetlona</p>

<p>Na przykład, pierwsze żądanie pod adres <code class="highlighter-rouge">/serwlet?parametr=123&amp;inny-parametr=abc&amp;test=-3</code> powinno wyświetlić stronę:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>requestSum: 120
totalSum: 120
</code></pre></div></div>

<p>Kolejne żądanie pod adres <code class="highlighter-rouge">/serwlet?parametr=336</code> powinno wyświetlić stornę</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>requestSum: 336
totalSum: 456
</code></pre></div></div>

<p>W przypadku jakichkolwiek problemów z wykonaniem ćwiczenia możesz rzucić okiem na <a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe/blob/master/02_serwlety/src/main/java/pl/samouczekprogramisy/kursaplikacjewebowe/servlets/exercise/ExerciseServlet.java">przykładowe rozwiązanie</a>.</p>

<h2 id="dodatkowe-materiały-do-nauki">Dodatkowe materiały do nauki</h2>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/HTTP_cookie">Artykuł na wikipedi na temat ciasteczek</a>,</li>
  <li><a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields">Lista standardowych nagłówków HTTP</a>,</li>
  <li><a href="https://jcp.org/en/jsr/detail?id=340">Specyfikacja serwletów</a>,</li>
  <li><a href="http://www.ietf.org/rfc/rfc2616.txt">Specyfikacja protokołu HTTP/1.1</a>,</li>
  <li><a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe/tree/master/02_serwlety/src/main/java/pl/samouczekprogramisy/kursaplikacjewebowe/servlets">Kod źródłowy przykładów użytych w artykule</a>.</li>
</ul>

<h2 id="podsumowanie">Podsumowanie</h2>

<p>Po lekturze tego artykułu znasz już zestaw podstawowych klocków, z których buduje się aplikacje webowe. Wiesz już czym są parametry adresu URL i jak z nimi pracować. Znasz mechanizm nagłówków. Potrafisz powiedzieć czym jest ciasteczko i sesja. Po wykonaniu ćwiczenia znasz te zagadnienia także od praktycznej strony. Innymi słowy kawał wiedzy ;).</p>

<p>Na koniec mam do Ciebie prośbę. Zależy mi na dotarciu do jak największego grona Samouków takich jak Ty. Podziel się proszę linkiem do artykułu ze swoimi znajomymi. Mam nadzieję, że im także spodoba się artykuł.</p>

<p>Jeśli nie chcesz ominąć kolejnych artykułów dopisz się do samouczkowego newslettera i polub stronę na facebooku. Do następnego razu!</p>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:czas" role="doc-endnote">
      <p>Jeśli zrobisz to szybciej niż 10 sekund po pierwszym wywołaniu. <a href="#fnref:czas" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

        

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań algorytmicznych z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 6147 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698960/m0b4d5.js?v4"></script>


</div>

        
      </section>

      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Kategorie: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/kategorie/#dsp2017" class="page__taxonomy-item" rel="tag">DSP2017</a><span class="sep">, </span>
    
      
      
      <a href="/kategorie/#kurs-aplikacji-webowych" class="page__taxonomy-item" rel="tag">Kurs aplikacji webowych</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Ostatnia aktualizacja:</strong> <time datetime="2018-07-18">2018-07-18</time></p>
        
        <p><strong><i class="fas fa-fw fa-child" aria-hidden="true"></i> Autor: </strong><a href="/o-mnie/">Marcin Pietraszek</a></p>
        <hr />
        <p>
          Nie popełnia błędów tylko ten, kto nic nie robi ;). Bardzo możliwe, że znajdziesz błąd, literówkę, coś co wymaga poprawy. Jeśli chcesz możesz samodzielnie 
          <a href="https://github.com/SamouczekProgramisty/samouczekprogramisty.github.io/edit/source/_posts/2017-04-01-naglowki-sesje-i-ciasteczka.md">poprawić tę stronę</a>. Jeśli nie chcesz poprawiać błędu, który udało Ci się znaleźć będę wdzięczny jeśli go 
          <a href="https://github.com/SamouczekProgramisty/samouczekprogramisty.github.io/issues/new?title=Błąd%20na%20stronie:%20_posts/2017-04-01-naglowki-sesje-i-ciasteczka.md">zgłosisz</a>. Z góry dziękuję!
        </p>
      </footer>
    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Zostaw komentarz</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">Także może Ci się spodobać</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2018/02/08_protokol_http_artykul.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/protokol-http/" rel="permalink">Protokół HTTP
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  10 minut(y)

</p>
    
    <p class="archive__item-excerpt" itemprop="description">W artykule tym dowiesz się więcej o protokole HTTP. Przeczytasz o ciasteczkach, nagłówkach i czasownikach HTTP. Dowiesz się czym jest idempotentność. Poznasz...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2019/02/02_watki_w_jezyku_java_artykul.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/watki-w-jezyku-java/" rel="permalink">Wątki w języku Java
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  10 minut(y)

</p>
    
    <p class="archive__item-excerpt" itemprop="description">Artykuł ten opisuje wątki w języku Java. Po jego lekturze dowiesz się czym jest wątek, jaki ma cykl życia i jak go uruchomić. Dowiesz się czym jest synchroni...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2017/03/25_serwlety_w_aplikacjach_webowych_artykul.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/serwlety-w-aplikacjach-webowych/" rel="permalink">Serwlety w aplikacjach webowych
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  9 minut(y)

</p>
    
    <p class="archive__item-excerpt" itemprop="description">W artykule tym przeczytasz o serwletach. Poznasz podstawy protokołu HTTP. Dowiesz się czym są serwlety i jak je pisać. Dowiesz się także czym jest plik war i...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2019/09/21_podstawy_uml_artykul.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/podstawy-uml/" rel="permalink">Podstawy UML
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  15 minut(y)

</p>
    
    <p class="archive__item-excerpt" itemprop="description">W artykule opisuję podstawy UML. Po lekturze tego artykułu poznasz kilka rodzajów diagramów, które moim zdaniem są najbardziej przydatne. Dowiesz się w jakic...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="search-searchbar"></div>
  <div class="search-hits"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">

    
      <li><strong>Śledź:</strong></li>
    

    
      
        
          <li><a href="https://www.facebook.com/SamouczekProgramisty" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/SamouczekProgramisty" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.youtube.com/channel/UCisPQ5nxB6yw3SfJPFWKTEg" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-youtube" aria-hidden="true"></i> YouTube</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>

  <ul>
    <li><a href="https://www.samouczekprogramisty.pl/o-mnie/">O mnie</a></li>
    <li><a href="https://www.samouczekprogramisty.pl/o-blogu/">O blogu</a></li>
    <li><a href="https://www.samouczekprogramisty.pl/polityka-prywatnosci/">Polityka prywatności</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2015-2021 Marcin Pietraszek</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>


<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'BAIWADE3K7',
  apiKey: '4a78df6a4d9f820ebbdb0a35f834b174',
  indexName: 'prod_samouczek',
  searchParameters: {
    restrictSearchableAttributes: [
      'title',
      'content'
    ]
  }
});

const hitTemplate = function(hit) {
  const url = hit.url;
  const title = hit._highlightResult.title.value;
  const content = hit._highlightResult.html.value;

  return `
    <div class="list__item">
      <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
        <h2 class="archive__item-title" itemprop="headline"><a href="${url}">${title}</a></h2>
        <div class="archive__item-excerpt" itemprop="description">${content}</div>
      </article>
    </div>
  `;
}

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '.search-searchbar',
    poweredBy: true,
    placeholder: 'Szukaj...'
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '.search-hits',
    templates: {
      item: hitTemplate,
      empty: 'Brak wyników',
    }
  })
);

// Starting the search only when toggle is clicked
$(document).ready(function () {
  $(".search__toggle").on("click", function() {
    if(!search.started) {
      search.start();
    }
  });
});
</script>





  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-68536783-1']);
  
    _gaq.push(['_gat._anonymizeIp']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://www.samouczekprogramisty.pl/naglowki-sesje-i-ciasteczka/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "817 http://www.samouczekprogramisty.pl/?p=817"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://samouczekprogramisty.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Proszę włacz obsługę JavaScript żeby móc zobaczyć komentarze.</noscript>


  





  </body>
</html>
