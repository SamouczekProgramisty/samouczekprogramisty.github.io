<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="pl" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Referencja, sterta i garbage collector – obiektów w Javie ciąg dalszy - Samouczek Programisty</title>
<meta name="description" content="W dzisiejszym artykule kolejna porcja wiedzy na temat obiektów i programowania obiektowego w języku Java. Dowiesz się czym jest referencja i czym różni się od obiektu. Przeczytasz o magicznym “garbage collectorze” i dowiesz się do czego on służy. Poznasz różnicę między literałem &quot;tekst&quot; i new String(&quot;tekst&quot;) i dlaczego ma ona znaczenie. Poznasz typ null oraz NullPointerException. Innymi słowy, kolejna część niezbędnika każdego programisty Java. Zapraszam do lektury :)">


  <meta name="author" content="Marcin Pietraszek">
  
  <meta property="article:author" content="Marcin Pietraszek">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="pl">
<meta property="og:site_name" content="Samouczek Programisty">
<meta property="og:title" content="Referencja, sterta i garbage collector – obiektów w Javie ciąg dalszy">
<meta property="og:url" content="https://www.samouczekprogramisty.pl/referencja-sterta-garbage-collector/">


  <meta property="og:description" content="W dzisiejszym artykule kolejna porcja wiedzy na temat obiektów i programowania obiektowego w języku Java. Dowiesz się czym jest referencja i czym różni się od obiektu. Przeczytasz o magicznym “garbage collectorze” i dowiesz się do czego on służy. Poznasz różnicę między literałem &quot;tekst&quot; i new String(&quot;tekst&quot;) i dlaczego ma ona znaczenie. Poznasz typ null oraz NullPointerException. Innymi słowy, kolejna część niezbędnika każdego programisty Java. Zapraszam do lektury :)">



  <meta property="og:image" content="https://www.samouczekprogramisty.pl/assets/images/2016/02/04_referencja_sterta_garbage_collector_artykul.jpeg">





  <meta property="article:published_time" content="2016-02-04T00:00:00+01:00">



  <meta property="article:modified_time" content="2018-10-17T19:50:39+02:00">



  

  


<link rel="canonical" href="https://www.samouczekprogramisty.pl/referencja-sterta-garbage-collector/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Marcin Pietraszek",
      "url": "https://www.samouczekprogramisty.pl/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Samouczek Programisty Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <link rel="shortcut icon" href="/assets/images/favicon.ico" /> 
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo.gif" alt="Samouczek Programisty"></a>
        
        <a class="site-title" href="/">
          Samouczek Programisty
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/kurs-programowania-java/">Kurs programowania Java</a>
            </li><li class="masthead__menu-item">
              <a href="/kurs-aplikacji-webowych/">Kurs aplikacji webowych</a>
            </li><li class="masthead__menu-item">
              <a href="/kurs-sql/">Kurs SQL</a>
            </li><li class="masthead__menu-item">
              <a href="/kontakt/">Kontakt</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Przełącz menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/2016/02/04_referencja_sterta_garbage_collector_artykul.jpeg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Referencja, sterta i garbage collector – obiektów w Javie ciąg dalszy

        
      </h1>
      
        <p class="page__lead">W dzisiejszym artykule kolejna porcja wiedzy na temat obiektów i programowania obiektowego w języku Java. Dowiesz się czym jest referencja i czym różni się od obiektu. Przeczytasz o magicznym “garbage collectorze” i dowiesz się do czego on służy. Poznasz różnicę między literałem <code class="language-plaintext highlighter-rouge">"tekst"</code> i <code class="language-plaintext highlighter-rouge">new String("tekst")</code> i dlaczego ma ona znaczenie. Poznasz typ <code class="language-plaintext highlighter-rouge">null</code> oraz <code class="language-plaintext highlighter-rouge">NullPointerException</code>. Innymi słowy, kolejna część niezbędnika każdego programisty Java. Zapraszam do lektury :)
</p>
      
      

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minut(y)
        
      </span>
    
  </p>


      
      
    </div>
  
  
    <span class="page__hero-caption"><a href="https://www.flickr.com/photos/sixteen-miles/3757672365">© sixteen-miles</a>
</span>
  
</div>




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://www.samouczekprogramisty.pl/" itemprop="item"><span itemprop="name">Strona główna</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Referencja, sterta i garbage collector – obiektów w Javie ciąg dalszy</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Referencja, sterta i garbage collector – obiektów w Javie ciąg dalszy">
    <meta itemprop="description" content="W dzisiejszym artykule kolejna porcja wiedzy na temat obiektów i programowania obiektowego w języku Java. Dowiesz się czym jest referencja i czym różni się od obiektu. Przeczytasz o magicznym “garbage collectorze” i dowiesz się do czego on służy. Poznasz różnicę między literałem &quot;tekst&quot; i new String(&quot;tekst&quot;) i dlaczego ma ona znaczenie. Poznasz typ null oraz NullPointerException. Innymi słowy, kolejna część niezbędnika każdego programisty Java. Zapraszam do lektury :)">
    <meta itemprop="datePublished" content="February 04, 2016">
    <meta itemprop="dateModified" content="October 17, 2018">

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        <aside class="sidebar__right ">
          
          <nav class="toc">
            <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Spis treści</h4></header>
            <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#sterta-i-stos-w-wirtualnej-maszynie-java">Sterta i stos w wirtualnej maszynie Java</a></li>
<li class="toc-entry toc-h2"><a href="#czym-różni-się-obiekt-od-referencji-i-zmiennej">Czym różni się obiekt od referencji i zmiennej?</a></li>
<li class="toc-entry toc-h2"><a href="#różnica-między-string-a-new-stringstring">Różnica między &quot;string&quot; a new String(&quot;string&quot;)</a></li>
<li class="toc-entry toc-h2"><a href="#garbage-collector-w-wirtualenej-maszynie-javy">Garbage Collector w wirtualenej maszynie Javy</a></li>
<li class="toc-entry toc-h2"><a href="#null-i-nullpointerexception">null i NullPointerException</a></li>
<li class="toc-entry toc-h2"><a href="#dodatkowe-materiały-do-nauki">Dodatkowe materiały do nauki</a></li>
<li class="toc-entry toc-h2"><a href="#zadanie">Zadanie</a></li>
<li class="toc-entry toc-h2"><a href="#podsumowanie">Podsumowanie</a></li>
</ul>
          </nav>
          <hr />
          
          <div class="mailerlite__form">
            <script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698980/y1i5k0.js?v7"></script>
          </div>
          <hr />
          <div class="fb-page">
            <a href="https://www.facebook.com/SamouczekProgramisty"><img src="/assets/images/facebook_logo.gif" alt="Profil Samouczka na Facebooku"/></a>
          </div>
        </aside>
        <p class="notice--info">To jest jeden z artykułów w ramach <a href="https://www.samouczekprogramisty.pl/kurs-programowania-java">darmowego kursu programowania w Javie</a>. Proszę zapoznaj się z pozostałymi częściami, mogą one być pomocne w zrozumieniu materiału z tego artykułu.</p>

<h2 id="sterta-i-stos-w-wirtualnej-maszynie-java">Sterta i stos w wirtualnej maszynie Java</h2>

<p>Z poprzednich artykułów wiesz, że maszyna wirtualna Javy zarządza za Ciebie pamięcią. Oznacza to tyle, że miejsce na obiekty, które tworzysz jest rezerwowane (i zwalniane jeśli obiekt nie jest już wykorzystywany) w tej pamięci. Pamięć ta nazywana jest stertą (ang. <em>heap space</em>).</p>

<p>Maszyna wirtualna Javy startuje zapewniając sobie miejsce na stertę w pamięci RAM (ang. <em>Random Access Memory</em>). Mówimy, ze alokuje tę pamięć. Na przykład jeśli Twój komputer ma 4GB pamięci RAM maszyna wirtualna podczas startu może przydzielić sobie 512MB. Obszar ten potencjalnie może się powiększyć w zależności od ustawień maszyny wirtualnej i dostępnej pamięci.</p>

<blockquote>
  <p>Tutaj drobna dygresja na temat dysku i pamięci operacyjnej. W czasach dysków HDD (ang. <em>Hard Disk Drive</em>) czas dostępu do pamięci RAM był znacząco krótszy. Obecnie przy dyskach SSD (ang. <em>Solid State Drive</em>) różnica nadal istnieje jednak nie jest tak duża.</p>

  <p>Dzięki temu krótkiemu czasowi dostępu do pamięci RAM programy mogły być bardziej wydajne – działać “szybciej”. Załóżmy że przeczytanie 1MB z pamięci ram zajmuje 1 sekundę (w rzeczywistości jest to około 250 nanosekundy więc cztery miliony razy krócej!), w takiej skali przeczytanie 1MB z dysku HDD zajmuje 1 minutę i 20 sekund, a przesłanie pakietu (paczki danych mniejszej niż 1MB) przez internet z Kalifornii do Holandii i z powrotem aż 10 minut!</p>
</blockquote>

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań algorytmicznych z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 6147 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/704312/f8q4i2.js?v4"></script>


</div>

<h2 id="czym-różni-się-obiekt-od-referencji-i-zmiennej">Czym różni się obiekt od referencji i zmiennej?</h2>

<p>Każdy obiekt w Javie zajmuje jakiś obszar na wspomnianej stercie. Zmienne, które wskazują na obiekty na stercie zawierają referencje. Referencje możemy przedstawić jako „sznurki” łączące zmienną z właściwym obiektem na stercie (obszarem pamięci na stercie gdzie znajduje się obiekt). Referencji (sznurków) do obiektu może być wiele. Proszę spójrz na przykład:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObjectVersusReference</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Object</span> <span class="n">referenceToObjectX</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>
        <span class="nc">Object</span> <span class="n">anotherReferenceToObjectX</span> <span class="o">=</span> <span class="n">referenceToObjectX</span><span class="o">;</span>
        <span class="nc">Object</span> <span class="n">refferenceToObjectY</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">referenceToObjectX</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">anotherReferenceToObjectX</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">refferenceToObjectY</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>W pierszej linijce metody <code class="language-plaintext highlighter-rouge">main</code> tworzona jest nowa zmienna typu <code class="language-plaintext highlighter-rouge">Object</code> o nazwie <code class="language-plaintext highlighter-rouge">referenceToObjectX</code>. W kolejnej linijce tworzona jest kolejna zmienna, która jest kopią isteniejącej już zmiennej. Trzecia linijka to wywołanie konstruktora, czyli utworzenie nowego obiektu i przypisanie go do zmiennej <code class="language-plaintext highlighter-rouge">referenceToObjectY</code>. Innymi słowy zmienne <code class="language-plaintext highlighter-rouge">referenceToObjectX</code> oraz <code class="language-plaintext highlighter-rouge">anotherReferenceToObjectX</code> zawierają tę samą referencję do tego samego obiektu na stercie.</p>

<p>Poniżej pokazałem to co zostanie wypisane na konsoli po uruchomieniu powyższego przykładu</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">Object</span><span class="err">@</span><span class="mi">7</span><span class="n">f31245a</span>
<span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">Object</span><span class="err">@</span><span class="mi">7</span><span class="n">f31245a</span>
<span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">Object</span><span class="err">@</span><span class="mi">6</span><span class="n">d6f6e28</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">java.lang.Object@7f31245a</code> to nic innego jak wynik domyślnej implementacji metody <code class="language-plaintext highlighter-rouge">toString</code> znajdującej się w klasie <code class="language-plaintext highlighter-rouge">Object</code>. Metoda ta zwraca nazwę klasy wraz z pakietem oraz adres obiektu na stercie. 7f31245a to adres obiektu (oczywiście w Twoim przypadku te numery mogą być różne – Java może przydzielić tym obiektom inny adres przy każdym uruchomieniu)<sup id="fnref:adres" role="doc-noteref"><a href="#fn:adres" class="footnote" rel="footnote">1</a></sup>.</p>

<p>Zauważyłeś, że dwie pierwsze linijki są takie same? To nic innego jak konsekwencja tego, że referencje są “sznurkami” wskazującymi na obiekty. Mamy dwie różne zmienne, które wskazują na ten sam adres na stercie. Jaka jest tego konsekwencja? Jeśli zmienimy zawartość obiektu pod tym adresem obie referencje będą pokazywały, nową, zmienioną wersję obiektu. Rzuć okiem na przykład.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObjectFieldsChanging</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">attribute</span><span class="o">;</span>
 
    <span class="kd">public</span> <span class="nf">ObjectFieldsChanging</span><span class="o">(</span><span class="kt">int</span> <span class="n">attribute</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">attribute</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAttribute</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">attribute</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAttribute</span><span class="o">(</span><span class="kt">int</span> <span class="n">attribute</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">attribute</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ObjectFieldsChanging</span> <span class="n">reference1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectFieldsChanging</span><span class="o">(</span><span class="mi">123</span><span class="o">);</span>
        <span class="nc">ObjectFieldsChanging</span> <span class="n">reference2</span> <span class="o">=</span> <span class="n">reference1</span><span class="o">;</span>
 
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">reference1</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">reference2</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">());</span>
 
        <span class="n">reference1</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
 
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">reference1</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">reference2</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Zmieniliśmy obiekt tylko pod jedną ze zmiennych, ale w związku z tym, że obie pokazują na ten sam adres na stercie zmiana dotyczyła obu.</p>

<p>Przypisanie nowej instancji obiektu do istniejącej zmiennej oczywiście “przepina sznurek” do innego miejsca na stercie (zmienna jest referencją do nowego obiektu, innego miejsca w pamięci).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ObjectFieldsChanging</span> <span class="n">reference1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectFieldsChanging</span><span class="o">(</span><span class="mi">123</span><span class="o">);</span>
<span class="nc">ObjectFieldsChanging</span> <span class="n">reference2</span> <span class="o">=</span> <span class="n">reference1</span><span class="o">;</span>
<span class="n">reference2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectFieldsChanging</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
</code></pre></div></div>

<blockquote>
  <p>Kolejna dygresja, jeśli po powyższych wyjaśnieniach masz mętlik w głowie pomiń ten akapit przy pierwszym czytaniu. Obiekty trzymane są na stercie, zmienne trzymane są na stosie (ang. <em>stack</em>) :). “Niestety” nie wszystkie zmienne wskazują na obiekty na stercie. Jeśli utworzysz zmienną lokalną (nie będącą atrybutem klasy) typu prostego (np. <code class="language-plaintext highlighter-rouge">int</code> czy <code class="language-plaintext highlighter-rouge">double</code>) wylądują one bezpośrednio na stosie. Referencja to nic innego jak numer, adres w pamięci. W przypadku zmiennych przechowywanych na stosie ten adres zostaje zastąpiony właściwą wartością zmiennej (np. liczbą 123).</p>
</blockquote>

<h2 id="różnica-między-string-a-new-stringstring">Różnica między <code class="language-plaintext highlighter-rouge">"string"</code> a <code class="language-plaintext highlighter-rouge">new String("string")</code></h2>

<p>Wiesz już, że obiekty zajmują obszar na stercie. Java stara się być trochę mądrzejsza i ograniczać ilość zajętego miejsca. Jedną z takich optymalizacji jest zachowanie w przypadku literałów reprezentujących typ <code class="language-plaintext highlighter-rouge">String</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">x1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"x"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">x2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"x"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">x3</span> <span class="o">=</span> <span class="s">"x"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">x4</span> <span class="o">=</span> <span class="s">"x"</span><span class="o">;</span>
</code></pre></div></div>

<p>Dwie pierwsze linijki to dwie zmienne, dwie referencje i dwa różne obiekty (które mają w taką samą zawartość). Dwie ostatnie linijki to dwie zmienne, dwie referencje i jeden obiekt. Obie referencje pokazują na obiekt utworzony w 3 linijce. Innymi słowy konstruktor tworzy kopię przekazanego literału. Literał może czasami ograniczyć ilość zużytego miejsca na stercie.</p>

<h2 id="garbage-collector-w-wirtualenej-maszynie-javy">Garbage Collector w wirtualenej maszynie Javy</h2>

<p>Zbieracz śmieci :) Gargage collector, inaczej GC, jest komponentem wirtualnej maszyny Javy odpowiedzialnym za czyszczenie sterty<sup id="fnref:sterta" role="doc-noteref"><a href="#fn:sterta" class="footnote" rel="footnote">2</a></sup>. Jeśli na stercie znajdą się obiekty, które już nie są używane zostają one usunięte aby zwolnić miejsce dla nowych obiektów.</p>

<p>Gdyby nie było tego mechanizmu pamięć nie byłaby zwalniana i po pewnym czasie program nie mógłby działać, nie miałby miejsca na alokację pamięci dla nowo tworzonych obiektów. GC używa różnych zaawansowanych algorytmów, które pozwalają zdecydować czy dany obiekt jest aktualnie wykorzystywany przez działający program.</p>

<p>GC działa w tle, w większości przypadków nawet nie będziesz wiedział kiedy. Wirtualna maszyna sama decyduje kiedy powinna go uruchomić. Istnieją sposoby aby zasugerować uruchomienie GC ale w rzeczywistości nie masz na to wpływu.</p>

<p>GC jest dość skomplikowanym mechanizmem, którego na tym etapie nie musisz w 100% rozumieć. Powinieneś wiedzieć o tym, że jest i odwala za Ciebie mnóstwo pracy :)</p>

<p>GC nie jest rozwiązaniem wszystkich problemów. Dalej możesz napisać program, który zajmie całą dostępną stertę i maszyna wirtualna nie będzie miała możliwości tworzenia nowych obiektów. W takiej sytuacji Twój program zostanie zamknięty, rzucony zostanie wyjątek <code class="language-plaintext highlighter-rouge">java.lang.OutOfMemoryError</code>.</p>

<h2 id="null-i-nullpointerexception"><code class="language-plaintext highlighter-rouge">null</code> i <code class="language-plaintext highlighter-rouge">NullPointerException</code></h2>

<p>Oj, ten wyjątek zobaczysz wiele razy w trakcie swojej kariery :) Zanim jednak przejdziemy do wyjątku przeczytaj o magicznym <code class="language-plaintext highlighter-rouge">null</code>.</p>

<p>Będzie to trochę abstrakcyjne ale właśnie tak jest zdefiniowane w specyfikacji języka Java. <code class="language-plaintext highlighter-rouge">Null</code> jest typem, który nie ma nazwy. W związku z tym, że nie ma nazwy nie ma możliwości utworzyć zmiennej typu <code class="language-plaintext highlighter-rouge">null</code>. Wyrażenie <code class="language-plaintext highlighter-rouge">null</code> zwraca referencję do <code class="language-plaintext highlighter-rouge">null</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Object</span> <span class="n">object</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span> <span class="c1">// ok</span>
<span class="kc">null</span> <span class="n">something</span> <span class="o">=</span> <span class="k">new</span> <span class="kc">null</span><span class="o">();</span> <span class="c1">// compilation error</span>
</code></pre></div></div>

<p>W praktyce jednak można zapomnieć o typie <code class="language-plaintext highlighter-rouge">null</code> i uznać to jako specjalny literał, który możemy przypisać do zmiennej każdego innego typu (który nie jest typem prostym). Możemy też założyć, że to jest “pusta” wartość zmiennej przechowującej referencję do obiektu.</p>

<p>A co się stanie jeśli wywołamy metodę na referencji wskazującej na <code class="language-plaintext highlighter-rouge">null</code>? Zostanie rzucony wyjątek <code class="language-plaintext highlighter-rouge">java.lang.NullPointerException</code>. Innymi słowy za każdym razem kiedy zobaczysz <code class="language-plaintext highlighter-rouge">NullPointerException</code> (a zobaczysz go nie raz) oznacza to, że zmienna ma wartość <code class="language-plaintext highlighter-rouge">null</code>.</p>

<h2 id="dodatkowe-materiały-do-nauki">Dodatkowe materiały do nauki</h2>

<ul>
  <li><a href="https://gist.github.com/jboner/2841832">https://gist.github.com/jboner/2841832</a> – zestawienie czasów na podstawie których przygotowałem jeden z akapitów</li>
  <li><a href="http://edu.pjwstk.edu.pl/wyklady/ppj/scb/ObRef/ObRef.html">http://edu.pjwstk.edu.pl/wyklady/ppj/scb/ObRef/ObRef.html</a></li>
  <li><a href="https://docs.oracle.com/javase/specs/jls/se12/html/jls-4.html#jls-4.1">https://docs.oracle.com/javase/specs/jls/se12/html/jls-4.html#jls-4.1</a></li>
  <li><a href="https://github.com/SamouczekProgramisty/KursJava/tree/master/10_obiekty/src/main/java/pl/samouczekprogramisty/kursjava">kod źródłowy przykładów użytych w artykule</a></li>
  <li><a href="https://pl.wikipedia.org/wiki/Referencja_%28informatyka%29">https://pl.wikipedia.org/wiki/Referencja_%28informatyka%29</a></li>
</ul>

<h2 id="zadanie">Zadanie</h2>

<p>Zadanie będzie nietypowe :) Spróbuj napisać program, który spowoduje przepełnienie sterty i skończy się wyjątkiem <code class="language-plaintext highlighter-rouge">java.lang.OutOfMemoryError</code>. Od razu powiem, że dla początkującego programisty nie jest to zadanie proste więc należy Ci się podpowiedź. Jak myślisz jak duża tablica z liczbami typu <code class="language-plaintext highlighter-rouge">Long</code> zmieści się w pamięci? Czy jeden wymiar tablicy zapełni pamięć? :)</p>

<h2 id="podsumowanie">Podsumowanie</h2>

<p>Bardzo się cieszę, że dotrwałeś do końca :) Mam nadzieję, że artykuł przypadł Ci do gustu. Na koniec mam do Ciebie prośbę – polub nasz <a href="https://www.facebook.com/SamouczekProgramisty">profil na Facebook’u</a> i podziel się artykułem ze znajomymi. Dzięki temu dotrę do większej grupy czytelników a właśnie na tym mi zależy.</p>

<p>Jeśli masz jakiekolwiek pytania proszę zadaj je w komentarzach, postaram się pomóc :)</p>

<p>Miłego dnia i do następnego razu!</p>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:adres" role="doc-endnote">
      <p>Właściwie to zależy od implementacji maszyny wirtualnej Javy, nie mamy gwarancji, że ten numerek będzie adresem. <a href="#fnref:adres" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:sterta" role="doc-endnote">
      <p>Nie tylko sterty, wirtualna maszyna Javy alokuje też pamięć w innych celach, na przykład tak zwany “metaspace”, który też jest czyszczony przez GC. <a href="#fnref:sterta" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

        

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań algorytmicznych z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 6147 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698960/m0b4d5.js?v4"></script>


</div>

        
      </section>

      <footer class="page__meta">
        
        


  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Kategorie: </strong>
    <span itemprop="keywords">
    
      <a href="/kategorie/#kurs-programowania-java" class="page__taxonomy-item" rel="tag">Kurs programowania Java</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Ostatnia aktualizacja:</strong> <time datetime="2018-10-17">2018-10-17</time></p>
        
        <p><strong><i class="fas fa-fw fa-child" aria-hidden="true"></i> Autor: </strong><a href="/o-mnie/">Marcin Pietraszek</a></p>
        <hr />
        <p>
          Nie popełnia błędów tylko ten, kto nic nie robi ;). Bardzo możliwe, że znajdziesz błąd, literówkę, coś co wymaga poprawy. Jeśli chcesz możesz samodzielnie 
          <a href="https://github.com/SamouczekProgramisty/samouczekprogramisty.github.io/edit/source/_posts/2016-02-04-referencja-sterta-garbage-collector.md">poprawić tę stronę</a>. Jeśli nie chcesz poprawiać błędu, który udało Ci się znaleźć będę wdzięczny jeśli go 
          <a href="https://github.com/SamouczekProgramisty/samouczekprogramisty.github.io/issues/new?title=Błąd%20na%20stronie:%20_posts/2016-02-04-referencja-sterta-garbage-collector.md">zgłosisz</a>. Z góry dziękuję!
        </p>
      </footer>
    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Zostaw komentarz</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">Także może Ci się spodobać</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2019/02/02_watki_w_jezyku_java_artykul.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/watki-w-jezyku-java/" rel="permalink">Wątki w języku Java
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          10 minut(y)
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Artykuł ten opisuje wątki w języku Java. Po jego lekturze dowiesz się czym jest wątek, jaki ma cykl życia i jak go uruchomić. Dowiesz się czym jest synchroni...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2019/04/20_jak_pisac_dobry_kod_w_javie_artykul.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/jak-pisac-kod-wysokiej-jakosci-w-jezyku-java/" rel="permalink">Jak pisać kod wysokiej jakości w języku Java
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          17 minut(y)
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">W artykule przeczytasz o tym czym jest konwencja nazewnicza. Dowiesz się jak jej stosować. Na przykładach pokażę Ci najczęściej popełniane błędy wraz z propo...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2016/03/23_java_typy_generyczne_artykul.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/typy-generyczne-w-jezyku-java/" rel="permalink">Typy generyczne w języku Java
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          11 minut(y)
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Dzień dobry! Nadszedł czas na poznanie typów generycznych. Dowiesz się o “szablonach” w języku Java, które pozwalają na tworzenie bardziej uniwersalnych typó...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2016/11/28_wyrazenia_regularne_artykul.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/wyrazenia-regularne-w-jezyku-java/" rel="permalink">Wyrażenia regularne w języku Java
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          17 minut(y)
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Artykuł ten poświęcony jest wyrażeniom regularnym. Dowiesz się w nim czym są wyrażenia regularne, jak i kiedy ich używać. Poznasz klasy biblioteki standardow...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="search-searchbar"></div>
  <div class="search-hits"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">

    
      <li><strong>Śledź:</strong></li>
    

    
      
        
          <li><a href="https://www.facebook.com/SamouczekProgramisty" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/SamouczekProgramisty" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.youtube.com/channel/UCisPQ5nxB6yw3SfJPFWKTEg" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-youtube" aria-hidden="true"></i> YouTube</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>

  <ul>
    <li><a href="https://www.samouczekprogramisty.pl/o-mnie/">O mnie</a></li>
    <li><a href="https://www.samouczekprogramisty.pl/o-blogu/">O blogu</a></li>
    <li><a href="https://www.samouczekprogramisty.pl/polityka-prywatnosci/">Polityka prywatności</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2015-2022 Marcin Pietraszek</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>


<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'BAIWADE3K7',
  apiKey: '4a78df6a4d9f820ebbdb0a35f834b174',
  indexName: 'prod_samouczek',
  searchParameters: {
    restrictSearchableAttributes: [
      'title',
      'content'
    ]
  }
});

const hitTemplate = function(hit) {
  const url = hit.url;
  const title = hit._highlightResult.title.value;
  const content = hit._highlightResult.html.value;

  return `
    <div class="list__item">
      <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
        <h2 class="archive__item-title" itemprop="headline"><a href="${url}">${title}</a></h2>
        <div class="archive__item-excerpt" itemprop="description">${content}</div>
      </article>
    </div>
  `;
}

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '.search-searchbar',
    poweredBy: true,
    placeholder: 'Szukaj...'
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '.search-hits',
    templates: {
      item: hitTemplate,
      empty: 'Brak wyników',
    }
  })
);

// Starting the search only when toggle is clicked
$(document).ready(function () {
  $(".search__toggle").on("click", function() {
    if(!search.started) {
      search.start();
    }
  });
});
</script>





  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-68536783-1']);
  
    _gaq.push(['_gat._anonymizeIp']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://www.samouczekprogramisty.pl/referencja-sterta-garbage-collector/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "217 http://www.samouczekprogramisty.pl/?p=217"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://samouczekprogramisty.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Proszę włacz obsługę JavaScript żeby móc zobaczyć komentarze.</noscript>


  





  </body>
</html>
