<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.11.2 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="pl" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Serwlety w aplikacjach webowych - Samouczek Programisty</title>
<meta name="description" content="W artykule tym przeczytasz o serwletach. Poznasz podstawy protokołu HTTP. Dowiesz się czym są serwlety i jak je pisać. Dowiesz się także czym jest plik war i przeczytasz o jego strukturze. Po lekturze tego artykułu zrozumiesz co kryje się pod spodem Spring MVC. Napiszesz też swoją aplikację webową, używającą serwletów. Zapraszam do lektury.">



<meta property="og:type" content="article">
<meta property="og:locale" content="pl">
<meta property="og:site_name" content="Samouczek Programisty">
<meta property="og:title" content="Serwlety w aplikacjach webowych">
<meta property="og:url" content="http://www.samouczekprogramisty.pl/serwlety-w-aplikacjach-webowych/">


  <meta property="og:description" content="W artykule tym przeczytasz o serwletach. Poznasz podstawy protokołu HTTP. Dowiesz się czym są serwlety i jak je pisać. Dowiesz się także czym jest plik war i przeczytasz o jego strukturze. Po lekturze tego artykułu zrozumiesz co kryje się pod spodem Spring MVC. Napiszesz też swoją aplikację webową, używającą serwletów. Zapraszam do lektury.">



  <meta property="og:image" content="http://www.samouczekprogramisty.pl/assets/images/2017/03/25_serwlety_w_aplikacjach_webowych_artykul.jpeg">





  <meta property="article:published_time" content="2017-03-25T12:11:07+01:00">





  

  


<link rel="canonical" href="http://www.samouczekprogramisty.pl/serwlety-w-aplikacjach-webowych/">







  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Marcin Pietraszek",
      "url": "http://www.samouczekprogramisty.pl",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Samouczek Programisty Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


     <link rel="shortcut icon" href="/assets/images/favicon.ico" /> 
 <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">Samouczek Programisty</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="http://www.samouczekprogramisty.pl/kurs-programowania-java/" >Kurs programowania Java</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://www.samouczekprogramisty.pl/kurs-aplikacji-webowych/" >Kurs aplikacji webowych</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://www.samouczekprogramisty.pl/kurs-sql/" >Kurs SQL</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://www.samouczekprogramisty.pl/kontakt/" >Kontakt</a>
            </li>
          
        </ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Przełącz menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      
  











<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/2017/03/25_serwlety_w_aplikacjach_webowych_artykul.jpeg');"
>
  
    <div class="wrapper">
      <h1 class="page__title" itemprop="headline">
        
          Serwlety w aplikacjach webowych

        
      </h1>
      
        <p class="page__lead">W artykule tym przeczytasz o serwletach. Poznasz podstawy protokołu HTTP. Dowiesz się czym są serwlety i jak je pisać. Dowiesz się także czym jest plik war i przeczytasz o jego strukturze. Po lekturze tego artykułu zrozumiesz co kryje się pod spodem Spring MVC. Napiszesz też swoją aplikację webową, używającą serwletów. Zapraszam do lektury.
</p>
      
      
      
    </div>
  
  
    <span class="page__hero-caption"><a href="https://www.flickr.com/photos/rafa2010/15353313381/sizes/l">© rafa2010</a>
</span>
  
</div>




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="http://www.samouczekprogramisty.pl/" itemprop="item"><span itemprop="name">Strona główna</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Serwlety w aplikacjach webowych</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Serwlety w aplikacjach webowych">
    <meta itemprop="description" content="W artykule tym przeczytasz o serwletach. Poznasz podstawy protokołu HTTP. Dowiesz się czym są serwlety i jak je pisać. Dowiesz się także czym jest plik war i przeczytasz o jego strukturze. Po lekturze tego artykułu zrozumiesz co kryje się pod spodem Spring MVC. Napiszesz też swoją aplikację webową, używającą serwletów. Zapraszam do lektury.">
    <meta itemprop="datePublished" content="March 25, 2017">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        <aside class="sidebar__right">
            
            <nav class="toc">
                <header>
                    <h4 class="nav__title">
                        <i class="fas fa-file-alt"></i>
                        Spis treści
                    </h4>
                </header>
                <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#wprowadzenie-do-protokołu-http">Wprowadzenie do protokołu HTTP</a>
<ul>
<li class="toc-entry toc-h3"><a href="#adres-url">Adres URL</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#czym-jest-serwlet">Czym jest serwlet</a></li>
<li class="toc-entry toc-h2"><a href="#interfejs-serwletów">Interfejs serwletów</a></li>
<li class="toc-entry toc-h2"><a href="#cykl-życia-serwletu">Cykl życia serwletu</a>
<ul>
<li class="toc-entry toc-h3"><a href="#utworzenie-instancji-serwletu">Utworzenie instancji serwletu</a></li>
<li class="toc-entry toc-h3"><a href="#inicjalizacja-serwletu">Inicjalizacja serwletu</a></li>
<li class="toc-entry toc-h3"><a href="#obsługa-żądań">Obsługa żądań</a></li>
<li class="toc-entry toc-h3"><a href="#zniszczenie-serwletu">Zniszczenie serwletu</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#kontener-serwletów">Kontener serwletów</a></li>
<li class="toc-entry toc-h2"><a href="#plik-war">Plik war</a>
<ul>
<li class="toc-entry toc-h3"><a href="#struktura-aplikacji-webowej">Struktura aplikacji webowej</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#sekret-działania-spring-mvc">Sekret działania Spring MVC</a></li>
<li class="toc-entry toc-h2"><a href="#pierwsza-aplikacja-webowa">Pierwsza aplikacja webowa</a></li>
<li class="toc-entry toc-h2"><a href="#ćwiczenie-do-wykonania">Ćwiczenie do wykonania</a></li>
<li class="toc-entry toc-h2"><a href="#dodatkowe-materiały-do-nauki">Dodatkowe materiały do nauki</a></li>
<li class="toc-entry toc-h2"><a href="#podsumowanie">Podsumowanie</a></li>
</ul>
            </nav>
            <hr>
            
            <div class="mailerlite__form">
                <script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698980/y1i5k0.js?v5"></script>
            </div>
            <hr>
            <div class="fb-page">
            <a href="https://www.facebook.com/SamouczekProgramisty"><img src="/assets/images/facebook_logo.gif" alt="Profil Samouczka na Facebooku"/></a>
            </div>
        </aside>
        
<div class="notice--info">
    
<p>Chociaż artykuł ten pisany jest z myślą o początkujących do jego pełnego zrozumienia przyda się wiedza, którą zawarłem w kliku innych artykułach. Zachęcam do zapoznania się z nimi przed podejściem do tego artykułu:</p>

<ul>
  <li><a href="/wprowadzenie-do-aplikacji-webowych/">Wstęp do aplikacji webowych</a></li>
  <li><a href="/wstep-do-gradle/">Wstęp do Gradle</a></li>
  <li><a href="/java-z-linii-polecen/">Java z linii poleceń</a></li>
</ul>

</div>

<p class="notice--info">Artykuł ten bazuje na specyfikacji serwletów w wersji 3.1, która jest częścią specyfikacji Java Enterprise Edition 7. Planowany termin wydania specyfikacji Java Enterprise Edition 8 to koniec 2017 roku, w ramach tej specyfikacji wydana ma być także nowa specyfikacja serwletów w wersji 4.0.</p>

<h2 id="wprowadzenie-do-protokołu-http">Wprowadzenie do protokołu HTTP</h2>

<p>Napisałem osobny artykuł na temat <a href="/protokol-http/">protokołu HTTP</a>. Tutaj przedstawię jedynie niezbędne podstawy.</p>

<p>Aby zacząć poważnie myśleć o tworzeniu aplikacji webowych niezbędna jest wiedza dotycząca protokołu HTTP (ang. Hypertext Transfer Protocol). Poniżej znajdziesz kilka podstawowych informacji, które będą Ci potrzebne w pracy z aplikacją webową.</p>
<ul>
  <li>Protokół HTTP jest oparty na komunikacji pomiędzy klientem a serwerem. Klientem może być na przykład przeglądarka internetowa. Serwer to aplikacja, która odpowiada na żądania klienta.</li>
  <li>Komunikacja pomiędzy klientem a serwerem oparta jest na żądaniach (ang. <em>request</em>) i odpowiedziach (ang. <em>response</em>). Klient wysyła żądanie, na które serwer udziela odpowiedzi.</li>
  <li>Zarówno żądania, jak i odpowiedzi mogą zawierać nagłówki i treść. Nagłówki służą do przekazania części informacji. W nagłówku na przykład zawarte mogą być informacje o przeglądarce, z której wysłano żądanie. Treścią odpowiedzi może być na przykład zawartość strony internetowej.</li>
  <li>Protokół HTTP oparty jest o tak zwane “czasowniki HTTP”. Można powiedzieć, że czasownik ten określa rodzaj żądania jakie wysyła klient. Wszystkich czasowników jest 9, podstawowe rodzaje żądań to GET, POST, PUT, DELETE.</li>
  <li>W większości przypadków używane są żądania typu GET i POST. Na przykład do wysłania informacji, które uzupełniłeś w formularzu używa się żądania typu POST. Natomiast zwykłe otworzenie strony, wpisanie adresu strony w przeglądarce to żądanie typu GET.</li>
</ul>

<h3 id="adres-url">Adres URL</h3>

<p>Każde z żądań dotyczy jakiegoś zasobu. Na przykład otwierając stronę <a href="http://www.samouczekprogramisty.pl">www.samouczekprogramisty.pl</a> w przeglądarce wysyłasz żądanie <code class="highlighter-rouge">GET http://www.samouczekprogramisty.pl</code>. Ta część po GET to nic innego jak URL (ang. <em>Uniform Resource Locator</em>). Innymi słowy adres strony www.</p>

<p>Adres URL może składać się z kilku części</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(scheme://)(user:password@)host(:port)(/)(path)(?query)(#fragment)
http://marcin:tajnehaslo@www.samouczekprogramisty.pl:80/kurs-programowania-java?parametr=wartosc&amp;innyParametr=wartosc#xxx
</code></pre></div></div>

<p>W ogromnej większości przypadków część z użytkownikiem i hasłem jest pomijana. Używana jest ona do uwierzytelniania, jednak metoda ta nie jest powszechnie używana. Port także jest pomijany. Pomijamy go ponieważ dla protokołu http domyślny port to właśnie 80 więc nie ma potrzeby go dodawać. Odrzucając rzadziej używane elementy adres url wygląda następująco</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://www.samouczekprogramisty.pl:80/kurs-programowania-java?parametr=wartosc&amp;innyParametr=wartosc
</code></pre></div></div>

<p>Mamy tutaj informację o protokole (http), serwerze (www.samouczekprogramisty.pl), ścieżce (/kurs-programowania-java) i parametrach (parametr=wartosc&amp;innyParametr=wartosc).</p>

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 1800 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/704312/f8q4i2.js?v3"></script>


</div>

<h2 id="czym-jest-serwlet">Czym jest serwlet</h2>

<p>Serwlet to klasa, która implementuje interfejs <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/Servlet.html"><code class="highlighter-rouge">Servlet</code></a>. Instancje tej klasy tworzone są przez kontener serwletów (na przykład Jetty). Instancje te wiedzą jak odpowiadać na żądania, które dostają od klienta.</p>

<p>Do obsługi żądania klienta służy metoda <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/Servlet.html#service-javax.servlet.ServletRequest-javax.servlet.ServletResponse-"><code class="highlighter-rouge">service</code></a>. Metoda ta przyjmuje jako parametry żądanie i odpowiedź. Na podstawie parametrów żądania odpowiednio modyfikuje przekazany argument odpowiedzi.</p>

<p>Szczerze mówiąc do tej pory ani razu nie napisałem klasy, która bezpośrednio implementuje ten interfejs. Używa się do tego klas, które upraszczają tworzenie serwletów. Są to klasy <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/GenericServlet.html"><code class="highlighter-rouge">GenericServlet</code></a> i <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html"><code class="highlighter-rouge">HttpServlet</code></a>.</p>

<p>Chociaż specyfikacja serwletów, nie wymaga użycia serwletów z protokołem HTTP w praktyce nie spotkałem się z innym zastosowaniem. Zatem z dwóch wyżej wspomnianych klas powinieneś zapamiętać <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html"><code class="highlighter-rouge">HttpServlet</code></a><sup id="fnref:serwlet"><a href="#fn:serwlet" class="footnote">1</a></sup>.</p>

<h2 id="interfejs-serwletów">Interfejs serwletów</h2>

<p>Wcześniej wspomniałem Ci już o metodzie <code class="highlighter-rouge">service</code>. Metodę tę musiałbyś zaimplementować jeśli utworzyłbyś klasę, która implementuje interfejs <code class="highlighter-rouge">Servlet</code> bezpośrednio. W przypadku klasy, która dziedziczy po <code class="highlighter-rouge">HttpServlet</code> wystarczy nadpisanie odpowiedniej metody. Na przykład, jeśli twój serwlet ma obsłużyć żądania typu GET musisz zaimplementować metodę <code class="highlighter-rouge">doGet</code>. Istnieją też metody dla pozostałych “czasowników”, na przykład <code class="highlighter-rouge">doPost</code> czy <code class="highlighter-rouge">doPut</code>.</p>

<p>W interfejsie serwletów znajdują się też metody, które są wykorzystywane w trakcie cyklu życia serwletu. Jak wspomniałem wyżej kontener odpowiedzialny jest za tworzenie instancji serwletu. Ponadto kontener zarządza cyklem życia serwletu używając metod z tego interfejsu.</p>

<h2 id="cykl-życia-serwletu">Cykl życia serwletu</h2>

<p>Każda instancja serwletu ma swój cykl życia. Jest to jasno zdefiniowana lista etapów, przez które przechodzi każdy serwelt. Lista ta wygląda następująco:</p>

<h3 id="utworzenie-instancji-serwletu">Utworzenie instancji serwletu</h3>

<p>Kontener wyszukuje klas serwletów i następnie tworzy jedną instancję serwletu<sup id="fnref:instancja"><a href="#fn:instancja" class="footnote">2</a></sup>.</p>

<h3 id="inicjalizacja-serwletu">Inicjalizacja serwletu</h3>

<p>Z racji tego, że to kontener serwletów odpowiedzialny jest za tworzenie instancji klasy serwletu nie ma możliwości przekazania odpowiednich parametrów do konstruktora. Do inicjalizacji stanu serwletu służy metoda <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/Servlet.html#init-javax.servlet.ServletConfig-"><code class="highlighter-rouge">init</code></a> i jest ona wywoływana przez kontener przed rozpoczęciem obsługi żądań przez dany serwlet.</p>

<h3 id="obsługa-żądań">Obsługa żądań</h3>

<p>W trakcie tego etapu kontener serwletów może wielokrotnie użyć tej samej instancji to obsługi wielu żądań. Pociąga to za sobą dość poważne konsekwencje. Możliwa jest sytuacja, w której w tym samym czasie instancja serwletu będzie obsługiwała kilka żądań jednocześnie. Na przykład jest to możliwe, gdy kilku użytkowników wejdzie na ten sam adres. Obsługa każdego żądania to wywołanie przez kontener metody <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/Servlet.html#service-javax.servlet.ServletRequest-javax.servlet.ServletResponse-"><code class="highlighter-rouge">service</code></a>.</p>

<h3 id="zniszczenie-serwletu">Zniszczenie serwletu</h3>

<p>Kontener może usunąć daną instancję serwletu. Przed zniszczeniem instancji wywołana zostanie metoda <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/Servlet.html#destroy--"><code class="highlighter-rouge">destroy</code></a>. Dzięki temu wewnątrz serweltu masz szansę na “posprzątanie”. Metoda ta może na przykład służyć do zamknięcia połączenia z bazą danych. Nie masz pewności jak długo serwlet będzie żył, o tym decyduje kontener.</p>

<h2 id="kontener-serwletów">Kontener serwletów</h2>

<p>Z poprzednich paragrafów dowiedziałeś się już, że kontener serwletów zarządza cyklem życia serwletów. Nie jest to jedyna odpowiedzialność kontenera. Kontener serwletów odpowiedzialny jest za “wyszukanie” klas odpowiedzialnych za działanie aplikacji.</p>

<p>W pierwszych wersjach specyfikacji niezbędny był do tego plik <code class="highlighter-rouge">web.xml</code> (tak zwany deskryptor wdrożenia), teraz aplikację webową można skonfigurować przy pomocy adnotacji. Dalej jednak to kontener musi “znaleźć” te klasy.</p>

<p>Poza serwletami istnieją też inne komponenty aplikacji webowej opisane w specyfikacji serlwetów. Na przykład filtry czy “listnenery” (ang. <em>listener</em>) (ma ktoś z was pomysł jak przetłumaczyć to słowo na polski :)?). Także i tutaj kontener serwletów pełni kluczową rolę. Kontener zarządza cyklem życia tych elementów.</p>

<p>Przy konstruowaniu odpowiedzi na żądania pomocne są pliki typu JSP (ang. <em>Java Server Pages</em>). Powtórzę się - kontener zarządza cyklem życia takich plików.</p>

<p>W przypadku aplikacji webowych możemy mówić o kilku kontekstach. Możemy wyróżnić na przykład kontekst żądania czy kontekst aplikacji. Także tutaj kontener serwletów za nie odpowiada.</p>

<p>Jest jeszcze wiele innych aspektów, za które odpowiada kontener wybiegają jednak poza zakres tego artykułu. Napiszę jeszcze o jednym z nich. Kontener także odpowiedzialny jest za instalowanie aplikacji webowej, wiąże się to z “czytaniem” zawartości pliku war, w którym znajduje się aplikacja webowa.</p>

<h2 id="plik-war">Plik war</h2>

<p>W artykule opisującym <a href="/java-z-linii-polecen/">Javę z linii poleceń</a> możesz przeczytać o plikach jar. W przypadku aplikacji webowych plik war pełni kluczową rolę.</p>

<p>W skład aplikacji webowej mogą wchodzić:</p>

<ul>
  <li>serwlety,</li>
  <li>strony jsp,</li>
  <li>inne klasy Java,</li>
  <li>zależności aplikacji webowej,</li>
  <li>statyczne pliki (na przykład html czy css),</li>
  <li>pliki konfiguracyjne opisujące aplikację webową.</li>
</ul>

<p>Wszystkie te pliki pakowane są w odpowiednią strukturę wewnątrz pliku war.</p>

<h3 id="struktura-aplikacji-webowej">Struktura aplikacji webowej</h3>

<p>Podobnie jak w przypadku pliku jar jest to zwykłe archiwum zip ze zmienionym rozszerzeniem (war a nie zip). Buduje się go przy pomocy tych samych narzędzi jak plik jar . Struktura przykładowego pliku war jest następująca:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>struktura_pliku.war
├── index.html
├── publiczny_katalog
│   └── strona.html
├── style.css
└── WEB-INF
    ├── classes
    │   └── pl
    │   └── samouczekprogramisty
    │   └── SomeServlet.class
    ├── lib
    │   └── some-jar-file.jar
    └── web.xml
</code></pre></div></div>

<p>Pliki takie jak <code class="highlighter-rouge">index.html</code>, <code class="highlighter-rouge">publiczny_ktalog/strona.html</code> czy <code class="highlighter-rouge">style.css</code> są publicznie dostępne. Oznacza to tyle, że kontener serwletów może serwować te pliki.</p>

<p>Sprawa wygląda zupełnie inaczej w przypadku katalogu <code class="highlighter-rouge">WEB-INF</code>. Jest to katalog, który zawiera dane, które nigdy nie mogą być bezpośrednio “serwowane” przez kontener. Wewnątrz <code class="highlighter-rouge">WEB-INF</code> znajdują się inne katalogi:</p>

<ul>
  <li><code class="highlighter-rouge">classes</code> - zawiera on skompilowane klasy aplikacji webowej,</li>
  <li><code class="highlighter-rouge">lib</code> - zawiera on spakowane pliki jar potrzebne do działania aplikacji webowej.</li>
</ul>

<p>Dodatkowo aplikacja webowa może zawierać tak zwany deskryptor wdrożenia (ang. <em>deployment descriptor</em>). Jest to plik <code class="highlighter-rouge">web.xml</code>, który konfiguruje działanie aplikacji webowej. W przypadku prostych aplikacji nie jest on wymagany, całą konfigurację można dostarczyć przy pomocy adnotacji.</p>

<h2 id="sekret-działania-spring-mvc">Sekret działania Spring MVC</h2>

<p>W codziennej pracy z aplikacjami webowymi programiści bardzo rzadko (wcale?) tworzą swoje serwlety. W ogromnej większości przypadków to biblioteka pomagająca przybudowaniu aplikacji webowych zawiera “główny serwlet”.</p>

<p>Ten serwlet pośredniczy przy wszystkich zapytaniach do danej aplikacji webowej. Następnie w zależności od ścieżki, której dotyczy dane żądanie przekazuje je do odpowiedniej klasy. I to właśnie te klasy pisane są przez programistów.</p>

<p>Dla przykładu w Spring MVC takim “głównym serwletem” jest <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/DispatcherServlet.java"><code class="highlighter-rouge">DispatcherServlet</code></a>. Zachęcam do zajrzenia do źródeł tego serwletu. Zobaczyć możesz tam jakie mechanizmy użyte są do przekazania żądania dalej.</p>

<p>Jak przeszukasz <code class="highlighter-rouge">DispatcherServlet</code> i klasy po których dziedziczy dogrzebiesz się do dobrze znanych metod, takich jak <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/FrameworkServlet.java#L833"><code class="highlighter-rouge">service</code></a> czy <a href="https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/FrameworkServlet.java#L853"><code class="highlighter-rouge">doGet</code></a>.</p>

<h2 id="pierwsza-aplikacja-webowa">Pierwsza aplikacja webowa</h2>

<p>Nadszedł czas, żeby wykorzystać tę wiedzę w praktyce. Proszę spójrz na przykład poniżej:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/date"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DateServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">DateTime</span> <span class="n">now</span> <span class="o">=</span> <span class="n">DateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="n">PrintWriter</span> <span class="n">responseOutput</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="n">responseOutput</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"&lt;html&gt;&lt;body&gt;"</span> <span class="o">+</span> <span class="n">now</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&lt;/body&gt;&lt;/html&gt;"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe/blob/master/01_serwlety/src/main/java/pl/samouczekprogramisty/kursaplikacjewebowe/servlets/DateServlet.java"><code class="highlighter-rouge">DateServlet</code></a> to serwlet, który odpowiada na żądania typu GET wysłane na adres <code class="highlighter-rouge">/date</code>. Oczywiście w produkcyjnych aplikacjach w inny sposób konstruuje się odpowiedzi, jednak przykład ten pokazuje ogólną zasadę działania.</p>

<p><code class="highlighter-rouge">response.getWriter()</code> zwraca instancję klasy <code class="highlighter-rouge">PrintWriter</code>. Należy traktować ją jako zawartość pliku, która zostanie wysłana w odpowiedzi na żądanie. Jeśli użyjemy tej metody odpowiedź, którą wygenerujemy musi być tekstowa (nie binarna). Ostatnia linijka metody <code class="highlighter-rouge">doGet</code> to właśnie generowanie treści odpowiedzi, gdzie odpowiadamy aktualną datą umieszczoną wewnątrz podstawowych znaczników html.</p>

<p>Taką klasę serwletu umieszczamy w projekcie. W moim przypadku jego struktura wygląda następująco:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── 01_serwlety
│   ├── build
│   ├── build.gradle
│   └── src
│   └── main
│   ├── java
│   │   └── pl
│   │   └── samouczekprogramisty
│   │   └── kursaplikacjewebowe
│   │   └── serwlety
│   │   └── DateServlet.java
│   └── webapp
├── build.gradle
├── gradle
│   └── wrapper
│   ├── gradle-wrapper.jar
│   └── gradle-wrapper.properties
├── gradlew
├── gradlew.bat
└── settings.gradle
</code></pre></div></div>

<p>Na tym etapie proszę użyj przykładowych plików umieszczonych w <a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe">repozytorium kodu</a>. W osobnym artykule wytłumaczę zasadę działania Gradle w przypadku aplikacji webowych. Bazowy plik <a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe/blob/master/build.gradle"><code class="highlighter-rouge">build.gradle</code></a> i plik <a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe/blob/master/01_serwlety/build.gradle"><code class="highlighter-rouge">01_serwlety/build.gradle</code></a> pozwalają na uruchomienie tak utworzonej aplikacji webowej:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>KursAplikacjeWebowe$ ./gradlew appRun
:01_serwlety:prepareInplaceWebAppFolder NO-SOURCE
:01_serwlety:createInplaceWebAppFolder UP-TO-DATE
:01_serwlety:compileJava UP-TO-DATE
:01_serwlety:processResources NO-SOURCE
:01_serwlety:classes UP-TO-DATE
:01_serwlety:prepareInplaceWebAppClasses UP-TO-DATE
:01_serwlety:prepareInplaceWebApp UP-TO-DATE
:01_serwlety:appRun
10:19:57 INFO Jetty 9.2.15.v20160210 started and listening on port 8080
10:19:57 INFO 01_serwlety runs at:
10:19:57 INFO http://localhost:8080/01_serwlety
Press any key to stop the server.
&gt; Building 87% &gt; :01_serwlety:appRun
</code></pre></div></div>

<p>Następnie uruchomienie przeglądarki i wpisanie adresu <code class="highlighter-rouge">http://localhost:8080/01_serwlety/date</code> powinno pokazać działającą aplikację, która wyświetla datę:</p>

<figure class="">
  <img src="/assets/images/2017/03/25_przegladarka_odpowiedz.jpeg" alt="" />
  
    <figcaption>Odpowiedź z <code class="highlighter-rouge">DataServlet</code>
</figcaption>
  
</figure>

<h2 id="ćwiczenie-do-wykonania">Ćwiczenie do wykonania</h2>

<p>Na podstawie <a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe/tree/master/01_serwlety">przykładowej aplikacji</a> napisz serwlet, który wyświetli liczbę sekund, od dnia Twojego urodzenia. Po wejściu na stronę, którą obsługuje dany serwlet powinna pokazać się liczba sekund, od Twoich urodzin.</p>
<h2 id="dodatkowe-materiały-do-nauki">Dodatkowe materiały do nauki</h2>

<p>Poniżej przygotowałem dla Ciebie kilka dodatkowych linków, które pomogą Ci rozszerzyć wiedzę z tego artykułu:</p>
<ul>
  <li><a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">Protokół HTTP</a></li>
  <li><a href="https://jcp.org/en/jsr/detail?id=340">Specyfikacja serwletów wersja 3.1</a></li>
  <li><a href="http://www.oracle.com/technetwork/java/javaee/tech/index.html">Specyfikacje Java EE 7</a></li>
  <li><a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe/tree/master/01_serwlety">Przykłady użyte w tym artykule</a></li>
</ul>

<h2 id="podsumowanie">Podsumowanie</h2>

<p>Gratulacje! Udało Ci się przeczytać cały artykuł, a nie należał on do najkrótszych ;). Po jego przeczytaniu wiesz czym jest serwlet. Poznałeś strukturę pliku war, znasz podstawowy zakres odpowiedzialności kontenera serwletów. Poznałeś też część magii, która kryje się pod spodem biblioteki Spring MVC. No i oczywiście utworzyłeś swoją pierwszą dynamiczną aplikację webowową!</p>

<p>Mimo objętości artykułu nie wyczerpałem tematu aplikacji webowych, jest to jeden z serii artykułów opisujących podstawy aplikacji webowych w Javie. Jeśli nie chcesz pominąć kolejnych artykułów polub Samouczka na facebooku i zapisz się do newslettera.</p>

<p>Do następnego razu!</p>
<div class="footnotes">
  <ol>
    <li id="fn:serwlet">
      <p>Prawda jest taka, że używając bibliotek pomagających tworzyć aplikacje webowe sam nie będziesz pisał serwletów. Będą to zwykłe klasy, które będą przez bibliotekę wywoływane. Biblioteka dostarczy “główny” serwlet, który będzie przekazywał żądania dalej. <a href="#fnref:serwlet" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:instancja">
      <p>Chodzi o zachowanie domyślne, kontener może utworzyć kilka instancji jeśli zaimplementujesz interfejs SingleThreadedModel. Takie podejście nie jest jednak polecane. <a href="#fnref:instancja" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

        

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 1800 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698960/m0b4d5.js?v2"></script>


</div>

        
      </section>

      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Kategorie: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/kategorie/#dsp2017" class="page__taxonomy-item" rel="tag">DSP2017</a><span class="sep">, </span>
    
      
      
      <a href="/kategorie/#kurs-aplikacji-webowych" class="page__taxonomy-item" rel="tag">Kurs aplikacji webowych</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Ostatnia aktualizacja:</strong> <time datetime="2017-03-25">2017-03-25</time></p>
        
        <p><strong><i class="fas fa-fw fa-child" aria-hidden="true"></i> Autor: </strong><a href="/o-mnie/">Marcin Pietraszek</a></p>
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Udostępnij</h4>
  

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.samouczekprogramisty.pl%2Fserwlety-w-aplikacjach-webowych%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Udostępnij Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fwww.samouczekprogramisty.pl%2Fserwlety-w-aplikacjach-webowych%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Udostępnij LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/pogodynka-dzialajacy-termometr/" class="pagination--pager" title="Pogodynka - działający termometr
">Poprzednia</a>
    
    
      <a href="/pogodynka-szkielet-aplikacji-webowej/" class="pagination--pager" title="Pogodynka - szkielet aplikacji webowej
">Następna</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Zostaw komentarz</h4>
      <section id="disqus_thread"></section>
    
</div>
    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">Także może Ci się spodobać</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/2018/02/08_protokol_http_artykul.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/protokol-http/" rel="permalink">Protokół HTTP
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  10 minut(y)
</p>
    
    <p class="archive__item-excerpt" itemprop="description">W artykule tym dowiesz się więcej o protokole HTTP. Przeczytasz o ciasteczkach, nagłówkach i czasownikach HTTP. Dowiesz się czym jest idempotentność. Poznasz...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/2017/04/01_naglowki_ciasteczka_sesje_artykul.jpeg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/naglowki-sesje-i-ciasteczka/" rel="permalink">Nagłówki, sesje i ciasteczka
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  11 minut(y)
</p>
    
    <p class="archive__item-excerpt" itemprop="description">W pierwszej części artykułu opisującej serwlety dowiedziałeś się podstaw dotyczących serwletów. W tym artykule będziesz mógł poszerzyć tę wiedzę. Dowiesz się...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/2017/11/20_rest_web_service_artykul.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/rest-web-service-z-java-ee-czesc-1/" rel="permalink">REST web service z Java EE część 1
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  11 minut(y)
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Po lekturze tego artykułu będziesz wiedział czym jest web service. Przeczytasz o tym czym jest REST. Dowiesz się dlaczego zdobył taką popularność. Zainstaluj...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/2018/01/22_rest_web_service_2_artykul.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/rest-web-service-z-java-ee-czesc-2/" rel="permalink">REST web service z Java EE część 2
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  12 minut(y)
</p>
    
    <p class="archive__item-excerpt" itemprop="description">W artykule tym pokazuję przykład webservice’u, który został utworzony wyłącznie w oparciu o technologie z parasola Java EE. Znajdziesz tu praktyczne wykorzys...</p>
  </article>
</div>
        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Śledź:</strong></li>
    
    
      <li><a href="https://www.facebook.com/SamouczekProgramisty"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
    
    
      <li><a href="https://github.com/SamouczekProgramisty"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
      <li><a href="https://www.youtube.com/channel/UCisPQ5nxB6yw3SfJPFWKTEg"><i class="fab fa-fw fa-youtube" aria-hidden="true"></i> YouTube</a></li>
    
    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>

  <ul>
    <li><a href="http://www.samouczekprogramisty.pl/o-mnie/">O mnie</a></li>
    <li><a href="http://www.samouczekprogramisty.pl/o-blogu/">O blogu</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2015-2018 Marcin Pietraszek</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>







  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-68536783-1']);
  
    _gaq.push(['_gat._anonymizeIp']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>





    
  <script>
    var disqus_config = function () {
      this.page.url = "http://www.samouczekprogramisty.pl/serwlety-w-aplikacjach-webowych/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "799 http://www.samouczekprogramisty.pl/?p=799"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://samouczekprogramisty.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Proszę włacz obsługę JavaScript żeby móc zobaczyć komentarze.</noscript>


  



  </body>
</html>