<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="pl" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Filtry w aplikacjach webowych - Samouczek Programisty</title>
<meta name="description" content="W artykule przeczytasz o komponentach używanych w praktycznie każdej aplikacji webowej. Mowa tu o filtrach. Wysokopoziomowe biblioteki pomagające tworzyć aplikacje webowe (takie jest Spring MVC) bazują na tych podstawowych mechanizmach. Dowiesz się czym jest filtr i do czego jest używany. Na końcu będziesz mógł wykorzystać zdobytą wiedzę wykonując proste ćwiczenia. Zapraszam do lektury.">


  <meta name="author" content="Marcin Pietraszek">


<meta property="og:type" content="article">
<meta property="og:locale" content="pl">
<meta property="og:site_name" content="Samouczek Programisty">
<meta property="og:title" content="Filtry w aplikacjach webowych">
<meta property="og:url" content="https://www.samouczekprogramisty.pl/filtry-w-aplikacjach-webowych/">


  <meta property="og:description" content="W artykule przeczytasz o komponentach używanych w praktycznie każdej aplikacji webowej. Mowa tu o filtrach. Wysokopoziomowe biblioteki pomagające tworzyć aplikacje webowe (takie jest Spring MVC) bazują na tych podstawowych mechanizmach. Dowiesz się czym jest filtr i do czego jest używany. Na końcu będziesz mógł wykorzystać zdobytą wiedzę wykonując proste ćwiczenia. Zapraszam do lektury.">



  <meta property="og:image" content="https://www.samouczekprogramisty.pl/assets/images/2017/04/15_filtry_artykul.jpeg">





  <meta property="article:published_time" content="2017-04-15T00:00:00+02:00">



  <meta property="article:modified_time" content="2018-07-18T20:43:32+02:00">



  

  


<link rel="canonical" href="https://www.samouczekprogramisty.pl/filtry-w-aplikacjach-webowych/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Marcin Pietraszek",
      "url": "https://www.samouczekprogramisty.pl/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Samouczek Programisty Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <link rel="shortcut icon" href="/assets/images/favicon.ico" /> 
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo.gif" alt=""></a>
        
        <a class="site-title" href="/">
          Samouczek Programisty
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/kurs-programowania-java/">Kurs programowania Java</a>
            </li><li class="masthead__menu-item">
              <a href="/kurs-aplikacji-webowych/">Kurs aplikacji webowych</a>
            </li><li class="masthead__menu-item">
              <a href="/kurs-sql/">Kurs SQL</a>
            </li><li class="masthead__menu-item">
              <a href="/kontakt/">Kontakt</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Przełącz menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/2017/04/15_filtry_artykul.jpeg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Filtry w aplikacjach webowych

        
      </h1>
      
        <p class="page__lead">W artykule przeczytasz o komponentach używanych w praktycznie każdej aplikacji webowej. Mowa tu o filtrach. Wysokopoziomowe biblioteki pomagające tworzyć aplikacje webowe (takie jest Spring MVC) bazują na tych podstawowych mechanizmach. Dowiesz się czym jest filtr i do czego jest używany. Na końcu będziesz mógł wykorzystać zdobytą wiedzę wykonując proste ćwiczenia. Zapraszam do lektury.
</p>
      
      
        <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minut(y)

</p>
      
      
      
    </div>
  
  
    <span class="page__hero-caption"><a href="https://www.flickr.com/photos/infobunny/5458629578/sizes/l">© infobunny</a>
</span>
  
</div>




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://www.samouczekprogramisty.pl/" itemprop="item"><span itemprop="name">Strona główna</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Filtry w aplikacjach webowych</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Filtry w aplikacjach webowych">
    <meta itemprop="description" content="W artykule przeczytasz o komponentach używanych w praktycznie każdej aplikacji webowej. Mowa tu o filtrach. Wysokopoziomowe biblioteki pomagające tworzyć aplikacje webowe (takie jest Spring MVC) bazują na tych podstawowych mechanizmach. Dowiesz się czym jest filtr i do czego jest używany. Na końcu będziesz mógł wykorzystać zdobytą wiedzę wykonując proste ćwiczenia. Zapraszam do lektury.">
    <meta itemprop="datePublished" content="April 15, 2017">
    <meta itemprop="dateModified" content="July 18, 2018">

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        <aside class="sidebar__right ">
          
          <nav class="toc">
            <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Spis treści</h4></header>
            <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#czym-jest-filtr">Czym jest filtr</a></li>
<li class="toc-entry toc-h2"><a href="#cykl-życia-filtrów">Cykl życia filtrów</a></li>
<li class="toc-entry toc-h2"><a href="#mapowanie-filtrów">Mapowanie filtrów</a></li>
<li class="toc-entry toc-h2"><a href="#łańcuch-filtrów">Łańcuch filtrów</a></li>
<li class="toc-entry toc-h2"><a href="#przykłady-użycia-filtrów">Przykłady użycia filtrów</a></li>
<li class="toc-entry toc-h2"><a href="#kolejność-wykonywania-filtrów">Kolejność wykonywania filtrów</a></li>
<li class="toc-entry toc-h2"><a href="#zastosowanie-filtrów">Zastosowanie filtrów</a></li>
<li class="toc-entry toc-h2"><a href="#ćwiczenia">Ćwiczenia</a></li>
<li class="toc-entry toc-h2"><a href="#podsumowanie">Podsumowanie</a></li>
</ul>
          </nav>
          <hr />
          
          <div class="mailerlite__form">
            <script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698980/y1i5k0.js?v7"></script>
          </div>
          <hr />
          <div class="fb-page">
            <a href="https://www.facebook.com/SamouczekProgramisty"><img src="/assets/images/facebook_logo.gif" alt="Profil Samouczka na Facebooku"/></a>
          </div>
        </aside>
        
<div class="notice--info">
  
<p>Artykuł ten zakłada, że wiesz czym są serwlety i adnotacje. Pownieneś potrafić już napisać serwlet i używać adnotacji. Powinieneś wiedzieć czym są parametry URL i jak z nimi pracować. Jeśli chcesz uzupełnić wiedzę z tego zakresu zapraszam do artykułów:</p>

<ul>
  <li><a href="/serwlety-w-aplikacjach-webowych/">serwlety w aplikacjach internetowych</a>,</li>
  <li><a href="/naglowki-sesje-i-ciasteczka/">parametry URL, ciasteczka, nagłówki i sesje</a>,</li>
  <li><a href="/adnotacje-w-jezyku-java/">adnotacje w języku Java</a>.</li>
</ul>

</div>

<h2 id="czym-jest-filtr">Czym jest filtr</h2>

<p>Filtry to nic innego jak klasy, które są wywoływane przed uruchomieniem właściwego serwletu. Po wykonaniu serwletu odpowiedź wraca przez ten sam filtr do klienta, który wysłał żądanie. Przed serwletem może być wywołanych wiele filtrów.</p>

<p>Poniższy rysunek pokazuje zapytanie od klienta, które przechodzi przez dwa filtry. Następnie uruchamiany jest serwlet. Przed przekazaniem odpowiedzi wracamy do tych samych filtrów w odwrotnej kolejności.</p>

<figure class="">
  <img src="/assets/images/2017/04/15_filter_chain.jpeg" alt="" />
  
    <figcaption>
      Łańcuch wywołania filtrów.

    </figcaption>
  
</figure>

<p>Filtry oznacza się adnotacją <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/annotation/WebFilter.html"><code class="highlighter-rouge">@WebFilter</code></a><sup id="fnref:webfilter" role="doc-noteref"><a href="#fn:webfilter" class="footnote">1</a></sup>. Podobnie jak wszystkie inne elementy specyfikacji serwletów także filtry mają swój cykl życia.</p>

<h2 id="cykl-życia-filtrów">Cykl życia filtrów</h2>

<p>Każdy z filtrów ma swój cykl życia. Podobnie jak w serwletach mamy tu metody <code class="highlighter-rouge">init</code> i <code class="highlighter-rouge">destroy</code>. Właściwa praca serwletu odbywa się wewnątrz metody <code class="highlighter-rouge">doFilter</code>.</p>
<ul>
  <li><a href="http://docs.oracle.com/javaee/7/api/javax/servlet/Filter.html#init-javax.servlet.FilterConfig-"><code class="highlighter-rouge">init</code></a> – metoda odpowiedzialna za inicjalizację serwletu. Musi się powieść aby kontener serwletów używał tego filtra,</li>
  <li><a href="http://docs.oracle.com/javaee/7/api/javax/servlet/Filter.html#doFilter-javax.servlet.ServletRequest-javax.servlet.ServletResponse-javax.servlet.FilterChain-"><code class="highlighter-rouge">doFilter</code></a> – tu odbywa się właściwa praca filtra. Metoda ta wywołana jest przed przekazaniem żądania do klasy serwletu,</li>
  <li><a href="http://docs.oracle.com/javaee/7/api/javax/servlet/Filter.html#destroy--"><code class="highlighter-rouge">destroy</code></a> – metoda, w które filtr ma szansę “posprzątać” po sobie :)</li>
</ul>

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań algorytmicznych z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 6147 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/704312/f8q4i2.js?v4"></script>


</div>

<h2 id="mapowanie-filtrów">Mapowanie filtrów</h2>

<p>Adnotacja <code class="highlighter-rouge">@WebFilter</code> posiada kilka elementów. Opiszę te, które pozwalają na przypisywanie filtrów do poszczególnych serwletów/zasobów:</p>
<ul>
  <li><code class="highlighter-rouge">urlPatterns</code> – lista szablonów adresów URL do których filtr powinien być zaaplikowany,</li>
  <li><code class="highlighter-rouge">servletNames</code> – lista nazw serwletów. Każdy serwlet może mieć nazwę, którą możesz ustawić za pomocą elementu name adnotacji <code class="highlighter-rouge">@WebServlet</code>,</li>
  <li><code class="highlighter-rouge">value</code> – domyślny element, stosowany zamiennie z <code class="highlighter-rouge">urlPatterns</code>.</li>
</ul>

<p>Szablony adresów URL pozwalają na mapowanie filtrów do adresów URL. Wewnątrz tych szablonów możesz używać znaku <code class="highlighter-rouge">*</code>, który pozwala na dopasowanie większej liczby adresów URL. Spójrz na kilka przykładów:</p>
<ul>
  <li><code class="highlighter-rouge">/some/url/address</code> – szablon pasuje tylko do jednego adresu URL - <code class="highlighter-rouge">/some/url/pattern</code>,</li>
  <li><code class="highlighter-rouge">/some/other/resource.*</code> – szablon pasuje do wielu adresów URL różniących się rozszerzeniami. Na przykład <code class="highlighter-rouge">/some/other/resource.html</code> czy <code class="highlighter-rouge">/some/other/resource.jpeg</code>,</li>
  <li><code class="highlighter-rouge">/some/*/address</code> – szablon pasuje do wielu adresów URL. Na przykład <code class="highlighter-rouge">/some/url/address</code> czy <code class="highlighter-rouge">/some/picture/addresss</code>,</li>
  <li><code class="highlighter-rouge">*</code> – szablon pasuje do wszystkich adresów URL. Jeśli stworzysz filtr, który będzie miał taki szablon będzie on aplikowany do wszystkich zapytań.</li>
</ul>

<p>Kilka przykładów z użyciem adnotacji:</p>
<ul>
  <li><code class="highlighter-rouge">@WebFilter("/chainingServlet")</code> – filtr będzie zaaplikowany wyłącznie do żądań dotyczących adresu <code class="highlighter-rouge">/chainingServlet</code>,</li>
  <li><code class="highlighter-rouge">@WebFilter(urlPatterns = "/chainingServlet", servletNames = "someRandomServletName")</code> – filtr będzie zaaplikowany do żądań dotyczących adresu <code class="highlighter-rouge">/chainingServlet</code> i żądań obsługiwanych przez serwlet o nazwie someRandomServletName</li>
  <li><code class="highlighter-rouge">@WebFilter(urlPatterns = {"/some/*/thing", "/other/*/thing"})</code> – filtr będzie zaaplikowany do żądań dotyczących wielu adresów pasujących do jednego z wzorców.</li>
</ul>

<h2 id="łańcuch-filtrów">Łańcuch filtrów</h2>
<p>Na diagramie pokazanym wyżej widziałeś dwa filtry. Filtrów uruchomionych przed właściwym serwletem może być wiele. Tworzą one tak zwany łańcuch filtrów (ang. <em>filter chain</em>). Łańcuch ten reprezentowany jest przez instancję klasy implementującej interfejs <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/FilterChain.html"><code class="highlighter-rouge">FilterChain</code></a>. Instancja ta przekazana jest jako parametr do metody <code class="highlighter-rouge">doFilter</code> wewnątrz filtra.</p>

<p>Interfejs ten zawiera wyłącznie jedną metodę <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/FilterChain.html#doFilter-javax.servlet.ServletRequest-javax.servlet.ServletResponse-"><code class="highlighter-rouge">doFilter</code></a>, która wykonuje kolejny filtr w łańcuchu. Jeśli filtr był ostatnim spowoduje to wywołanie właściwego serwletu.</p>

<p>Pociąga to za sobą ważną konsekwencję. Jeśli wewnątrz filtra nie wywołasz tej metody właściwe żądanie nigdy nie dotrze do serwletu.</p>

<h2 id="przykłady-użycia-filtrów">Przykłady użycia filtrów</h2>

<p>Zacznijmy od definicji prostego serwletu. Serwlet w odpowiedzi wyświetla wszystkie atrybuty żądania. Jeśli żaden atrybut nie jest ustawiony, w odpowiedzi wysłana zostanie pusta strona HTML.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/simpleServlet"</span><span class="o">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"simpleServletName"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
 
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">PrintWriter</span> <span class="n">responseWriter</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
 
        <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;html&gt;&lt;body&gt;"</span><span class="o">);</span>
        <span class="nc">Enumeration</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">attributeNames</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getAttributeNames</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">attributeNames</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">attributeName</span> <span class="o">=</span> <span class="n">attributeNames</span><span class="o">.</span><span class="na">nextElement</span><span class="o">();</span>
            <span class="nc">Object</span> <span class="n">attributeValue</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="n">attributeName</span><span class="o">);</span>
            <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;p&gt;"</span> <span class="o">+</span> <span class="n">attributeName</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">attributeValue</span> <span class="o">+</span> <span class="s">"&lt;/p&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">responseWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;/html&gt;&lt;/body&gt;"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Następnie filtr, który dodaje jeden atrybut wewnątrz metody <code class="highlighter-rouge">doFilter</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebFilter</span><span class="o">(</span><span class="n">servletNames</span> <span class="o">=</span> <span class="s">"simpleServletName"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleFilter</span> <span class="kd">implements</span> <span class="nc">Filter</span> <span class="o">{</span>
 
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(</span><span class="nc">FilterConfig</span> <span class="n">filterConfig</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span> <span class="o">{</span>
    <span class="o">}</span>
 
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doFilter</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="nc">FilterChain</span> <span class="n">chain</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">ServletException</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"before"</span><span class="o">);</span>
        <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"simpleServletAttribute"</span><span class="o">,</span> <span class="s">"simpleServlet"</span><span class="o">);</span>
        <span class="n">chain</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"after"</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Po uruchomieniu takiej aplikacji i wysłaniu żądania na adres <code class="highlighter-rouge">/simpleServlet</code> powinieneś zobaczyć jeden atrybut dodany prez filtr.</p>

<h2 id="kolejność-wykonywania-filtrów">Kolejność wykonywania filtrów</h2>

<p>Wiesz już, że do jednego zasobu/serwletu można aplikować wiele filtrów. Bardzo często kolejność ich wykonania jest bardzo istotna. Na przykład nie ma potrzeby kompresowania odpowiedzi jeśli użytkownik nie ma prawa do wykonania danego żądania. Równie ważne jest logowanie wszystkich żądań, niezależnie od tego czy użytkownik ma do nich prawo czy nie.</p>

<p>Mając zatem trzy filtry:</p>

<ul>
  <li>loggingFilter – loguje podstawowe informacje o żądaniu,</li>
  <li>authenticationFilter – weryfikuje tożsamość użytkownika,</li>
  <li>compressionFilter – kompresuje odpowiedź.</li>
</ul>

<p>Muszą one być uruchomione w dokładnej tej kolejności: loggingFilter, authenticationFilter, compressionFilter, aby aplikacja działa poprawnie.</p>

<p>Tutaj mam dla Ciebie smutną wiadomość. Używając adnotacji, bez pliku <code class="highlighter-rouge">web.xml</code> (nazywanego deskryptorem wdrożenia) nie mamy nad tym kontroli. Specyfikacja serwletów nie definiuje kolejności filtrów definiowanych wyłącznie przy pomocy adnotacji <code class="highlighter-rouge">@WebFilter</code>. Co za tym idzie kolejność ta może być różna w różnych implementacjach i nie powinieneś na niej polegać.</p>

<p>Sprawa wygląda zupełnie inaczej w przypadku użycia pliku <code class="highlighter-rouge">web.xml</code>. W tym przypadku kolejność jest dobrze zedfiniowana:</p>

<ul>
  <li>wszystkie filtry pasujące do danego żądania używające <code class="highlighter-rouge">urlPattern</code> według kolejności w pliku <code class="highlighter-rouge">web.xml</code>,</li>
  <li>wszystkie filtry pasujące do danego żądania używające <code class="highlighter-rouge">servletName</code> według kolejności w pliku <code class="highlighter-rouge">web.xml</code>.</li>
</ul>

<p>Na tym etapie ważne jest żebyś wiedział o tym ograniczaniu. Sam plik <code class="highlighter-rouge">web.xml</code> opiszę w osobnym artykule, wtedy też dowiesz się jak dokładnie określać kolejność wykonania filtrów.</p>

<h2 id="zastosowanie-filtrów">Zastosowanie filtrów</h2>

<p>Teraz jak już wiesz jak wyglądają filtry musisz dowiedzieć się o ich zastosowaniu. Filtry pozwalają na uniknięcie duplikacji kodu. Najczęściej to właśnie dzięki filtrom realizowane są następujące funkcjonalności:</p>
<ul>
  <li>uwierzytelnianie – sprawdzenie czy użytkownik ma prawo do uzyskania odpowiedzi na dane żądanie. Innymi słowy, sprawdzenie czy jest zalogowany,</li>
  <li>logowanie, audyt – tworzenie logów aplikacji webowej, część informacji (na przykład URL żądania) można logować już na etapie filtrów,</li>
  <li>kompresja – filtry kompresują odpowiedź. Dzięki zmniejszonej objętości przeglądarka szybciej dostaje odpowiedź,</li>
  <li>cache – czasami przez uruchomieniem serwletu można stwierdzić, że odpowiedź się nie zmieniła.</li>
</ul>

<p>Poplularny Spring MVC także używa filtrów. Kilka z nich znajduje się w osobnym <a href="https://github.com/spring-projects/spring-framework/tree/master/spring-web/src/main/java/org/springframework/web/filter">pakiecie</a>. Na przykład:</p>
<ul>
  <li><a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/filter/CharacterEncodingFilter.java"><code class="highlighter-rouge">CharacterEncodingFilter</code></a> ustawia kodowanie znaków użyte w żadaniu, odpowiedzi<sup id="fnref:kodowanie" role="doc-noteref"><a href="#fn:kodowanie" class="footnote">2</a></sup>,</li>
  <li><a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/filter/CommonsRequestLoggingFilter.java"><code class="highlighter-rouge">CommonsRequestLoggingFilter</code></a> logowanie, filtr loguje informacje o przychodzących żądaniach.</li>
</ul>

<h2 id="ćwiczenia">Ćwiczenia</h2>

<p>Na koniec czekają na Ciebie dwa ćwiczenia, w których przećwiczysz wiedzę dotyczącą filtrów w praktyce.</p>
<ol>
  <li>Napisz serwlet, który wyświetli wszystkie atrybuty żądania. Serwlet powinien być poprzedzony dwoma filtrami, każdy z nich powinien ustawić co najmniej jeden atrybut żądania,</li>
  <li>Napisz filtr, który zablokuje wykonanie serwletu jeśli w adresie URL występuje jakikolwiek parametr o wartości “blokuj”.</li>
</ol>

<p>Jak zwykle, pytaj jeśli ukniesz na którymś etapie. W ostateczności możesz rzucić okiem na <a href="https://github.com/SamouczekProgramisty/KursAplikacjeWebowe/tree/master/03_filtry/src/main/java/pl/samouczekprogramisty/kursaplikacjewebowe/filters">przykładowe rozwiązanie</a>. Zachęcam jednak do samodzielnego rozwiązania ćwiczeń, wtedy nauczysz się najwięcej.</p>

<h2 id="podsumowanie">Podsumowanie</h2>

<p>Filtry w aplikacjach webowych pełnią bardzo ważną rolę. Dzisiaj udało Ci się tę rolę poznać. Wiesz czym jest filtr, wiesz także jak używać łańcuch filtrów. Poznałeś przykłady filtrów w Spring MVC. Przykładowe ćwiczenia pozwoliły Ci utrwalić materiał. Innymi słowy poznałeś kolejny klocek niezbędny do budowy aplikacji webowych. Gratulacje! Pochwal się o tym znajomym przesyłając im link do tego artykułu ;).</p>

<p>Jeśli nie chcesz pominąć kolejnych artykułów na blogu proszę dopisz się do samouczkowego newslettera i polub stronę na facebooku. Do następnego razu!</p>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:webfilter" role="doc-endnote">
      <p>Do tej pory nie wspomniałem Ci jeszcze o pliku <code class="highlighter-rouge">web.xml</code>, w którym także można filtry konfigurować. Aby niepotrzebnie nie komplikować plik ten opiszę w <a href="/deskryptor-wdrozenia-w-aplikacjach-webowych/">osobnym artykule</a>. <a href="#fnref:webfilter" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:kodowanie" role="doc-endnote">
      <p>Upraszczając, kodowanie znaków to sposób w jaki reprezentujemy tekst. To dzięki niemu wiadomo jak interpretować polskie znaki. Jeśli używa się błędnego kodowania mogą pojawić się “krzaki”. <a href="#fnref:kodowanie" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

        

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań algorytmicznych z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 6147 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698960/m0b4d5.js?v4"></script>


</div>

        
      </section>

      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Kategorie: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/kategorie/#dsp2017" class="page__taxonomy-item" rel="tag">DSP2017</a><span class="sep">, </span>
    
      
      
      <a href="/kategorie/#kurs-aplikacji-webowych" class="page__taxonomy-item" rel="tag">Kurs aplikacji webowych</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Ostatnia aktualizacja:</strong> <time datetime="2018-07-18">2018-07-18</time></p>
        
        <p><strong><i class="fas fa-fw fa-child" aria-hidden="true"></i> Autor: </strong><a href="/o-mnie/">Marcin Pietraszek</a></p>
        <hr />
        <p>
          Nie popełnia błędów tylko ten, kto nic nie robi ;). Bardzo możliwe, że znajdziesz błąd, literówkę, coś co wymaga poprawy. Jeśli chcesz możesz samodzielnie 
          <a href="https://github.com/SamouczekProgramisty/samouczekprogramisty.github.io/edit/source/_posts/2017-04-15-filtry-w-aplikacjach-webowych.md">poprawić tę stronę</a>. Jeśli nie chcesz poprawiać błędu, który udało Ci się znaleźć będę wdzięczny jeśli go 
          <a href="https://github.com/SamouczekProgramisty/samouczekprogramisty.github.io/issues/new?title=Błąd%20na%20stronie:%20_posts/2017-04-15-filtry-w-aplikacjach-webowych.md">zgłosisz</a>. Z góry dziękuję!
        </p>
      </footer>
    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Zostaw komentarz</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">Także może Ci się spodobać</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2019/02/02_watki_w_jezyku_java_artykul.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/watki-w-jezyku-java/" rel="permalink">Wątki w języku Java
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  10 minut(y)

</p>
    
    <p class="archive__item-excerpt" itemprop="description">Artykuł ten opisuje wątki w języku Java. Po jego lekturze dowiesz się czym jest wątek, jaki ma cykl życia i jak go uruchomić. Dowiesz się czym jest synchroni...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2017/04/01_naglowki_ciasteczka_sesje_artykul.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/naglowki-sesje-i-ciasteczka/" rel="permalink">Nagłówki, sesje i ciasteczka
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  10 minut(y)

</p>
    
    <p class="archive__item-excerpt" itemprop="description">W pierwszej części artykułu opisującej serwlety dowiedziałeś się podstaw dotyczących serwletów. W tym artykule będziesz mógł poszerzyć tę wiedzę. Dowiesz się...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2017/03/25_serwlety_w_aplikacjach_webowych_artykul.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/serwlety-w-aplikacjach-webowych/" rel="permalink">Serwlety w aplikacjach webowych
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  9 minut(y)

</p>
    
    <p class="archive__item-excerpt" itemprop="description">W artykule tym przeczytasz o serwletach. Poznasz podstawy protokołu HTTP. Dowiesz się czym są serwlety i jak je pisać. Dowiesz się także czym jest plik war i...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2018/02/08_protokol_http_artykul.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/protokol-http/" rel="permalink">Protokół HTTP
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  10 minut(y)

</p>
    
    <p class="archive__item-excerpt" itemprop="description">W artykule tym dowiesz się więcej o protokole HTTP. Przeczytasz o ciasteczkach, nagłówkach i czasownikach HTTP. Dowiesz się czym jest idempotentność. Poznasz...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="search-searchbar"></div>
  <div class="search-hits"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">

    
      <li><strong>Śledź:</strong></li>
    

    
      
        
          <li><a href="https://www.facebook.com/SamouczekProgramisty" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/SamouczekProgramisty" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.youtube.com/channel/UCisPQ5nxB6yw3SfJPFWKTEg" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-youtube" aria-hidden="true"></i> YouTube</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>

  <ul>
    <li><a href="https://www.samouczekprogramisty.pl/o-mnie/">O mnie</a></li>
    <li><a href="https://www.samouczekprogramisty.pl/o-blogu/">O blogu</a></li>
    <li><a href="https://www.samouczekprogramisty.pl/polityka-prywatnosci/">Polityka prywatności</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2015-2022 Marcin Pietraszek</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>


<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'BAIWADE3K7',
  apiKey: '4a78df6a4d9f820ebbdb0a35f834b174',
  indexName: 'prod_samouczek',
  searchParameters: {
    restrictSearchableAttributes: [
      'title',
      'content'
    ]
  }
});

const hitTemplate = function(hit) {
  const url = hit.url;
  const title = hit._highlightResult.title.value;
  const content = hit._highlightResult.html.value;

  return `
    <div class="list__item">
      <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
        <h2 class="archive__item-title" itemprop="headline"><a href="${url}">${title}</a></h2>
        <div class="archive__item-excerpt" itemprop="description">${content}</div>
      </article>
    </div>
  `;
}

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '.search-searchbar',
    poweredBy: true,
    placeholder: 'Szukaj...'
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '.search-hits',
    templates: {
      item: hitTemplate,
      empty: 'Brak wyników',
    }
  })
);

// Starting the search only when toggle is clicked
$(document).ready(function () {
  $(".search__toggle").on("click", function() {
    if(!search.started) {
      search.start();
    }
  });
});
</script>





  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-68536783-1']);
  
    _gaq.push(['_gat._anonymizeIp']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://www.samouczekprogramisty.pl/filtry-w-aplikacjach-webowych/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "841 http://www.samouczekprogramisty.pl/?p=841"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://samouczekprogramisty.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Proszę włacz obsługę JavaScript żeby móc zobaczyć komentarze.</noscript>


  





  </body>
</html>
