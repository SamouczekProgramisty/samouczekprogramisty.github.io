<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="pl" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Testy jednostkowe z JUnit 5 - Samouczek Programisty</title>
<meta name="description" content="W artykule tym przeczytasz o JUnit 5. Dowiesz się co jest nowego w testowaniu przy użyciu JUnit 5. Poznasz sposoby na użycie wyrażeń lambda w testach. Zdobytą wiedzę będziesz mógł przećwiczyć rozwiązując zadania umieszczone na końcu artykułu.">


  <meta name="author" content="Marcin Pietraszek">
  
  <meta property="article:author" content="Marcin Pietraszek">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="pl">
<meta property="og:site_name" content="Samouczek Programisty">
<meta property="og:title" content="Testy jednostkowe z JUnit 5">
<meta property="og:url" content="https://www.samouczekprogramisty.pl/testy-jednostkowe-z-junit5/">


  <meta property="og:description" content="W artykule tym przeczytasz o JUnit 5. Dowiesz się co jest nowego w testowaniu przy użyciu JUnit 5. Poznasz sposoby na użycie wyrażeń lambda w testach. Zdobytą wiedzę będziesz mógł przećwiczyć rozwiązując zadania umieszczone na końcu artykułu.">



  <meta property="og:image" content="https://www.samouczekprogramisty.pl/assets/images/2018/04/13_testy_jednostkowe_z_junit5.jpg">





  <meta property="article:published_time" content="2018-04-13T00:00:00+02:00">



  <meta property="article:modified_time" content="2019-10-27T12:01:38+01:00">



  

  


<link rel="canonical" href="https://www.samouczekprogramisty.pl/testy-jednostkowe-z-junit5/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Marcin Pietraszek",
      "url": "https://www.samouczekprogramisty.pl/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Samouczek Programisty Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <link rel="shortcut icon" href="/assets/images/favicon.ico" /> 
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo.gif" alt="Samouczek Programisty"></a>
        
        <a class="site-title" href="/">
          Samouczek Programisty
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/kurs-programowania-java/">Kurs programowania Java</a>
            </li><li class="masthead__menu-item">
              <a href="/kurs-aplikacji-webowych/">Kurs aplikacji webowych</a>
            </li><li class="masthead__menu-item">
              <a href="/kurs-sql/">Kurs SQL</a>
            </li><li class="masthead__menu-item">
              <a href="/kontakt/">Kontakt</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Przełącz menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/2018/04/13_testy_jednostkowe_z_junit5.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Testy jednostkowe z JUnit 5

        
      </h1>
      
        <p class="page__lead">W artykule tym przeczytasz o JUnit 5. Dowiesz się co jest nowego w testowaniu przy użyciu JUnit 5. Poznasz sposoby na użycie wyrażeń lambda w testach. Zdobytą wiedzę będziesz mógł przećwiczyć rozwiązując zadania umieszczone na końcu artykułu.
</p>
      
      

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          9 minut(y)
        
      </span>
    
  </p>


      
      
    </div>
  
  
    <span class="page__hero-caption"><a href="https://www.flickr.com/photos/rosengrant/4012683209/sizes/l">© rosengrant</a>
</span>
  
</div>




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://www.samouczekprogramisty.pl/" itemprop="item"><span itemprop="name">Strona główna</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Testy jednostkowe z JUnit 5</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Testy jednostkowe z JUnit 5">
    <meta itemprop="description" content="W artykule tym przeczytasz o JUnit 5. Dowiesz się co jest nowego w testowaniu przy użyciu JUnit 5. Poznasz sposoby na użycie wyrażeń lambda w testach. Zdobytą wiedzę będziesz mógł przećwiczyć rozwiązując zadania umieszczone na końcu artykułu.">
    <meta itemprop="datePublished" content="April 13, 2018">
    <meta itemprop="dateModified" content="October 27, 2019">

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        <aside class="sidebar__right ">
          
          <nav class="toc">
            <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Spis treści</h4></header>
            <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#testy-jednostkowe-z-junit-5">Testy jednostkowe z JUnit 5</a>
<ul>
<li class="toc-entry toc-h3"><a href="#powody-powstania-junit-5">Powody powstania JUnit 5</a></li>
<li class="toc-entry toc-h3"><a href="#junit-5-jako-platforma">JUnit 5 jako platforma</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#pierwszy-test-jednostkowy-z-junit-5">Pierwszy test jednostkowy z JUnit 5</a></li>
<li class="toc-entry toc-h2"><a href="#możliwości-junit-5">Możliwości JUnit 5</a>
<ul>
<li class="toc-entry toc-h3"><a href="#cykl-życia-testów">Cykl życia testów</a></li>
<li class="toc-entry toc-h3"><a href="#zmiana-nazwy-testu">Zmiana nazwy testu</a></li>
<li class="toc-entry toc-h3"><a href="#testowanie-wyjątków">Testowanie wyjątków</a></li>
<li class="toc-entry toc-h3"><a href="#ograniczanie-czasu-działania-testów">Ograniczanie czasu działania testów</a></li>
<li class="toc-entry toc-h3"><a href="#zagnieżdżanie-testów">Zagnieżdżanie testów</a></li>
<li class="toc-entry toc-h3"><a href="#łączenie-kilku-asercji">Łączenie kilku asercji</a></li>
<li class="toc-entry toc-h3"><a href="#powtarzanie-testów">Powtarzanie testów</a></li>
<li class="toc-entry toc-h3"><a href="#ignorowanie-testów">Ignorowanie testów</a></li>
<li class="toc-entry toc-h3"><a href="#mechanizm-rozszerzeń">Mechanizm rozszerzeń</a>
<ul>
<li class="toc-entry toc-h4"><a href="#przykładowe-rozszerzenie">Przykładowe rozszerzenie</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#tworzenie-własnych-adnotacji">Tworzenie własnych adnotacji</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#uruchamianie-testów-junit-5">Uruchamianie testów JUnit 5</a>
<ul>
<li class="toc-entry toc-h3"><a href="#junit-5-z-gradle">JUnit 5 z Gradle</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#materiały-dodatkowe">Materiały dodatkowe</a></li>
<li class="toc-entry toc-h2"><a href="#zadania-do-wykonania">Zadania do wykonania</a></li>
<li class="toc-entry toc-h2"><a href="#podsumowanie">Podsumowanie</a></li>
</ul>
          </nav>
          <hr />
          
          <div class="mailerlite__form">
            <script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698980/y1i5k0.js?v7"></script>
          </div>
          <hr />
          <div class="fb-page">
            <a href="https://www.facebook.com/SamouczekProgramisty"><img src="/assets/images/facebook_logo.gif" alt="Profil Samouczka na Facebooku"/></a>
          </div>
        </aside>
        
<div class="notice--info">
  
<p>Jest to kolejny artykuł poświęcony tematyce testów, który napisałem na Samouczku. Zachęcam Cię także do przeczytania poprzednich artykułów:</p>

<ul>
  <li><a href="/testy-jednostkowe-z-junit/">Testy jednostkowe z JUnit 4</a> – artykuł wprowadza w świat testów. Przeczytasz w nim między innymi o tym czym są asercje czy po co piszemy testy. Jeśli nie pisałeś wcześniej testów to tutaj powinieneś zacząć,</li>
  <li><a href="/test-driven-development-na-przykladzie/"><em>Test driven development</em> na przykładzie</a> – artykuł o podejściu do pisania testów nazywanym <em>test driven development</em>. Opisuję w nim cały cykl <em>RED, GREEN, REFACTOR</em> popierając go przykładami.</li>
</ul>

<p>W tym artykule będę zakładał, że wiesz czym są testy. W treści artykułu czasami będę porównywał wersję JUnit 5 z poprzednią, jednak znajomość JUnit 4 nie jest niezbędna.</p>

</div>

<h2 id="testy-jednostkowe-z-junit-5">Testy jednostkowe z JUnit 5</h2>

<h3 id="powody-powstania-junit-5">Powody powstania JUnit 5</h3>

<p>JUnit 4 to monolit. Jeden plik JAR (ang. <em>Java Archive</em>), który zawiera całą bibliotekę. Ten plik zawiera między innymi:</p>

<ul>
  <li>klasy odpowiedzialne za wyszukiwanie testów,</li>
  <li>klasy odpowiedzialna za uruchamianie testów,</li>
  <li>klasy zawierające API do pisania testów (np. <code class="language-plaintext highlighter-rouge">@Test</code> czy implementacje asercji).</li>
</ul>

<p>Jak widzisz łamie to jedną z podstawowych reguł dobrego podejścia do tworzenia kodu obiektowego: rób jedną rzecz i rób ją dobrze<sup id="fnref:solid" role="doc-noteref"><a href="#fn:solid" class="footnote" rel="footnote">1</a></sup>.</p>

<p>Poza tym IDE do uruchamiania testów i wyświetlania wyników używały prywatnej implementacji. Między innymi z tych powodów ewolucyjne rozwijanie biblioteki JUnit nie było możliwe. Nawet zmiana niektórych atrybutów powodowała, że IDE błędnie wyświetlało wyniki testów. Z tego powodu powstała inicjatywa rozwijania kolejnej wersji tej biblioteki.</p>

<h3 id="junit-5-jako-platforma">JUnit 5 jako platforma</h3>

<p>JUnit 5 to trzy niezależne komponenty<sup id="fnref:podzielone" role="doc-noteref"><a href="#fn:podzielone" class="footnote" rel="footnote">2</a></sup>:</p>

<ul>
  <li>platforma do uruchamiania testów: <em>JUnit Platform</em>,</li>
  <li>API używane do pisania testów: <em>JUnit Jupiter</em>,</li>
  <li>API używane do uruchamia testów napisanych w starszych wersjach JUnit na platformie JUnit 5: <em>JUnit Vintage</em>.</li>
</ul>

<p>W swojej codziennej pracy używa się <em>JUnit Jupiter</em>, czyli samego API, które pozwala na tworzenie testów. To właśnie <em>JUnit Jupiter</em> zawiera adnotacje, który są niezbędne w trakcie pisania testów. W trakcie uruchamiania testów pośrednio używa się też <em>JUnit Platform</em>, na przykład uruchamiając testy w IDE.</p>

<h2 id="pierwszy-test-jednostkowy-z-junit-5">Pierwszy test jednostkowy z JUnit 5</h2>

<p>Projekt będę budował przy użyciu <a href="/wstep-do-gradle/">Gradle</a>. Przykładowy test będzie służył do sprawdzenia, programu odpowiedzialnego za konwersję jednostek wagi. Każda z jednostek implementowała będzie <a href="/interfejsy-w-jezyku-java/#interfejs-znacznikowy">interfejs znacznikowy</a> <code class="language-plaintext highlighter-rouge">WeightUnit</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">WeightUnit</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="no">SCALE</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span>
    <span class="nc">RoundingMode</span> <span class="no">ROUNDING_MODE</span> <span class="o">=</span> <span class="nc">RoundingMode</span><span class="o">.</span><span class="na">CEILING</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Klasa <code class="language-plaintext highlighter-rouge">Pound</code> reprezentuje funty:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Pound</span> <span class="kd">implements</span> <span class="nc">WeightUnit</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">BigDecimal</span> <span class="no">POUND_TO_KILOGRAM_RATIO</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"0.453592"</span><span class="o">).</span><span class="na">setScale</span><span class="o">(</span><span class="no">SCALE</span><span class="o">,</span> <span class="no">ROUNDING_MODE</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">BigDecimal</span> <span class="n">value</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Pound</span><span class="o">(</span><span class="nc">BigDecimal</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">value</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Weight can't be negative!"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="no">SCALE</span><span class="o">,</span> <span class="no">ROUNDING_MODE</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Kilogram</span> <span class="nf">toKilograms</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Kilogram</span><span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="no">POUND_TO_KILOGRAM_RATIO</span><span class="o">).</span><span class="na">setScale</span><span class="o">(</span><span class="no">SCALE</span><span class="o">,</span> <span class="no">ROUNDING_MODE</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Jej odpowiednik dla kilogramów to klasa <code class="language-plaintext highlighter-rouge">Kilogram</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Kilogram</span> <span class="kd">implements</span> <span class="nc">WeightUnit</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">BigDecimal</span> <span class="n">value</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Kilogram</span><span class="o">(</span><span class="nc">BigDecimal</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">value</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Weight can't be negative!"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="no">SCALE</span><span class="o">,</span> <span class="no">ROUNDING_MODE</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Pound</span> <span class="nf">toPounds</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Pound</span><span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="nc">Pound</span><span class="o">.</span><span class="na">POUND_TO_KILOGRAM_RATIO</span><span class="o">,</span> <span class="no">SCALE</span><span class="o">,</span> <span class="no">ROUNDING_MODE</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Przykładowy zestaw testów może wyglądać następująco:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">jupiter</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">UnitConverterTest</span> <span class="o">{</span>
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">shouldConvertZeroKilogramValue</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Pound</span> <span class="n">pounds</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Kilogram</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">).</span><span class="na">toPounds</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="n">pounds</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">shouldConvertZeroPoundValue</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Kilogram</span> <span class="n">kilograms</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Pound</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">).</span><span class="na">toKilograms</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="n">kilograms</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">shouldConvert1Pound</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"0.4536"</span><span class="o">),</span> <span class="k">new</span> <span class="nc">Pound</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">).</span><span class="na">toKilograms</span><span class="o">().</span><span class="na">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">shouldConvert1Kilogram</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"2.2046"</span><span class="o">),</span> <span class="k">new</span> <span class="nc">Kilogram</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">).</span><span class="na">toPounds</span><span class="o">().</span><span class="na">value</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Zwróć uwagę na to, że zarówno klasa <code class="language-plaintext highlighter-rouge">UnitConverterTest</code> jak i wszystkie metody nie są publiczne. JUnit 5, w odróżnieniu od swojego poprzednika, nie wymaga aby klasa/metody z testami były dostępne publicznie.</p>

<p>Kolejną różnicą jest pakiet, w którym znajdują się klasy użyte do tworzenia testów: <code class="language-plaintext highlighter-rouge">org.junit.jupiter.api</code>. Jest to bazowy pakiet zawierający wszystkie elementy niezbędne do pisania testów.</p>

<p>Metody oznaczone adnotacją <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Test.html"><code class="language-plaintext highlighter-rouge">@Test</code></a> to testy. Metody te nie mogą zwracać żadnej wartości, nie mogą być prywatne ani statyczne.</p>

<p>Wewnątrz testów używa się asercji. Asercje dostarczone przez JUnit zgrupowane są wewnątrz klasy <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html"><code class="language-plaintext highlighter-rouge">Assertions</code></a>. W przykładach powyżej użyłem asercji <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html#assertEquals-java.lang.Object-java.lang.Object-"><code class="language-plaintext highlighter-rouge">assertEquals</code></a>.</p>

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań algorytmicznych z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 6147 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/704312/f8q4i2.js?v4"></script>


</div>

<h2 id="możliwości-junit-5">Możliwości JUnit 5</h2>

<h3 id="cykl-życia-testów">Cykl życia testów</h3>

<p>Podobnie jak w poprzedniej wersji JUnit 5 określa cykl życia testów. Dzięki temu możesz odpowiednio przygotować warunki do uruchomienia testów. JUnit tworzy nową instancję klasy przed każdym uruchomieniem testu.</p>

<p>Jeśli chcesz zmienić to zachowanie możesz użyć adnotacji <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/TestInstance.html"><code class="language-plaintext highlighter-rouge">@TestInstance</code></a>, dzięki tej adnotacji możesz wymusić współdzielenie instancji klasy pomiędzy testami. Moim zdaniem, w większości przypadków nie powinieneś jednak tego robić. Dobrą praktyką jest pisanie testów, które są od siebie niezależne.</p>

<p>Do zarządzania cyklem życia służą następujące <a href="/adnotacje-w-jezyku-java/">adnotacje</a>:</p>

<ul>
  <li><a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/BeforeEach.html"><code class="language-plaintext highlighter-rouge">@BeforeEach</code></a>,</li>
  <li><a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/AfterEach.html"><code class="language-plaintext highlighter-rouge">@AfterEach</code></a>,</li>
  <li><a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/BeforeAll.html"><code class="language-plaintext highlighter-rouge">@BeforeAll</code></a>,</li>
  <li><a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/AfterAll.html"><code class="language-plaintext highlighter-rouge">@AfterAll</code></a>.</li>
</ul>

<h3 id="zmiana-nazwy-testu">Zmiana nazwy testu</h3>

<p>JUnit 5 pozwala na manipulowanie nazwą testu. Dzięki temu możesz opisać test używając znaków, które nie są dopuszczalne w nazwie metody. Służy do tego adnotacja <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/DisplayName.html"><code class="language-plaintext highlighter-rouge">@DisplayName</code></a>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"0.1 pounds to kilograms ♥ ♦ ♣ ♠"</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">shouldConvertFractions</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"0.0454"</span><span class="o">),</span> <span class="k">new</span> <span class="nc">Pound</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"0.1"</span><span class="o">)).</span><span class="na">toKilograms</span><span class="o">().</span><span class="na">value</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="testowanie-wyjątków">Testowanie wyjątków</h3>

<p>W odróżnieniu od JUnit 4, JUnit 5 nie pozwala na określenie oczekiwanego wyjątku w elemencie adnotacji <code class="language-plaintext highlighter-rouge">@Test</code>. W nowym podejściu użyte są <a href="/wyrazenia-lambda-w-jezyku-java/">wyrażenia lambda</a>. Kod, który ma rzucić wyjątek powinien implementować interfejs funkcyjny <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/function/Executable.html"><code class="language-plaintext highlighter-rouge">Executable</code></a>. W najprostszym przypadku jest to wyrażenie lambda.</p>

<p>Metoda <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html#assertThrows-java.lang.Class-org.junit.jupiter.api.function.Executable-"><code class="language-plaintext highlighter-rouge">assertThrows</code></a> przyjmuje:</p>
<ul>
  <li>klasę wyjątku, który powinien być rzucony</li>
  <li>implementację interfejsu, która powinna ten wyjątek rzucić:</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">shouldntAcceptNegativeWeightInPounds</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">IllegalArgumentException</span> <span class="n">exception</span> <span class="o">=</span> <span class="n">assertThrows</span><span class="o">(</span>
        <span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
        <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Pound</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(-</span><span class="mi">1</span><span class="o">))</span>
    <span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Weight can't be negative!"</span><span class="o">,</span> <span class="n">exception</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">assertThrows</code> zwraca instancję wyjątku, który został rzucony.</p>

<h3 id="ograniczanie-czasu-działania-testów">Ograniczanie czasu działania testów</h3>

<p>JUnit 5 pozwala na testowanie czy wykonanie fragmentu kodu będzie trwało krócej niż założony z góry okres. Służą do tego asercje:</p>

<ul>
  <li><a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html#assertTimeout-java.time.Duration-org.junit.jupiter.api.function.Executable-"><code class="language-plaintext highlighter-rouge">assertTimeout</code></a>,</li>
  <li><a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html#assertTimeoutPreemptively-java.time.Duration-org.junit.jupiter.api.function.Executable-"><code class="language-plaintext highlighter-rouge">assertTimeoutPreemptively</code></a>.</li>
</ul>

<p>Obie asercje przyjmują argumenty:</p>
<ul>
  <li>instancję klasy <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/time/Duration.html"><code class="language-plaintext highlighter-rouge">Duration</code></a> określającą maksymalny czas działania,</li>
  <li>implementację interfejsu funkcyjnego <code class="language-plaintext highlighter-rouge">Executable</code>, to ten sam interfejs, który jest użyty w przypadku <code class="language-plaintext highlighter-rouge">assertThrows</code>.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">shouldTransalteUnitsBlazinglyFast</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertTimeout</span><span class="o">(</span><span class="nc">Duration</span><span class="o">.</span><span class="na">ofMillis</span><span class="o">(</span><span class="mi">10</span><span class="o">),</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Kilogram</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">).</span><span class="na">toPounds</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">assertTimeout</code> uruchamia przekazany fragment kodu w tym samym wątku i czeka na jego zakończenie. Po zakończeniu sprawdza czy założony czas został przekroczony. <code class="language-plaintext highlighter-rouge">assertTimeoutPreemptively</code> uruchamia przekazany fragment kodu w innym wątku i kończy go natychmiast po przekroczeniu założonego czasu.</p>

<h3 id="zagnieżdżanie-testów">Zagnieżdżanie testów</h3>

<p>JUnit 5 pozwala na wykorzystywanie <a href="/klasy-wewnetrzne-i-anonimowe-w-jezyku-java/">klas wewnętrznych</a>. Wraz z adnotacjami do zarządzania cyklem życia pozwala to na lepszą organizację testów. Służy do tego adnotacja <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Nested.html"><code class="language-plaintext highlighter-rouge">@Nested</code></a>. Przykład poniżej pokazuje klasę <code class="language-plaintext highlighter-rouge">ExceptionHandling</code>, która zawiera jeden test. Klasa ta jest zagnieżdżona wewnątrz <code class="language-plaintext highlighter-rouge">UnitConverterTest</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">UnitConverterTest</span> <span class="o">{</span>
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">shouldConvertZeroKilogramValue</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Pound</span> <span class="n">pounds</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Kilogram</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">).</span><span class="na">toPounds</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="mi">44</span><span class="o">),</span> <span class="n">pounds</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Nested</span>
    <span class="kd">class</span> <span class="nc">ExceptionHandling</span> <span class="o">{</span>
        <span class="nd">@Test</span>
        <span class="kt">void</span> <span class="nf">shouldntAcceptNegativeWeightInPounds</span><span class="o">()</span> <span class="o">{</span>
            <span class="nc">IllegalArgumentException</span> <span class="n">exception</span> <span class="o">=</span> <span class="n">assertThrows</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Pound</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(-</span><span class="mi">1</span><span class="o">)));</span>
            <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Weight can't be negative!"</span><span class="o">,</span> <span class="n">exception</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="łączenie-kilku-asercji">Łączenie kilku asercji</h3>

<p>Dobrą praktyką pisania testów jest używanie jednej asercji na każdy test. Takie podejście pozwala zobaczyć wszystkie asercje, które nie zostały spełnione. Prosty przykład poniżej pokazuje tę sytuację. Test jednostkowy, który zawiera te dwie linijki nigdy nie dojdzie do uruchomienia drugiej z nich:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">assertTrue</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">assertFalse</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</code></pre></div></div>

<p>Przez to zachowanie nie zobaczysz od razu wszystkich błędnych asercji. JUnit 5 pozwala na obejście tego problemu dzięki użyciu asercji <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html#assertAll-org.junit.jupiter.api.function.Executable...-"><code class="language-plaintext highlighter-rouge">assertAll</code></a>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">shouldntAcceptNullValue</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertAll</span><span class="o">(</span>
        <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">assertThrows</span><span class="o">(</span><span class="nc">NullPointerException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Kilogram</span><span class="o">(</span><span class="kc">null</span><span class="o">)),</span>
        <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">assertThrows</span><span class="o">(</span><span class="nc">NullPointerException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Pound</span><span class="o">(</span><span class="kc">null</span><span class="o">))</span>
    <span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">assertAll</code> przyjmuje listę<sup id="fnref:typy" role="doc-noteref"><a href="#fn:typy" class="footnote" rel="footnote">3</a></sup> implementacji interfejsu <code class="language-plaintext highlighter-rouge">Executable</code>. Podobnie jak poprzednio zazwyczaj są to wyrażenia lambda.</p>

<p>W przykładzie powyżej niezależnie od wyniku pierwszej asercji druga także zostanie wywołana. Obie zostaną uwzględnione w wynikach działania testów.</p>

<h3 id="powtarzanie-testów">Powtarzanie testów</h3>

<p>Zdarzyło mi się pisać testy, które zawierały pętle. Pętle te służyły do powtórzenia dokładnie tego samego testu wielokrotnie. Pisałem takie testy w sytuacji gdy dochodziło do wyścigu i czasami dany test przechodził, czasami nie. JUnit 5 umożliwia pisanie tego typu testów bez użycia pętli. Służy do tego adnotacja <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/RepeatedTest.html"><code class="language-plaintext highlighter-rouge">@RepeatedTest</code></a>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RepeatedTest</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">shouldAlwaysReturnTheSameValue</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"29.4840"</span><span class="o">).</span><span class="na">setScale</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">Pound</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="mi">65</span><span class="o">)).</span><span class="na">toKilograms</span><span class="o">().</span><span class="na">value</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>W przykładzie powyżej test zostanie wywołany trzy razy.</p>

<h3 id="ignorowanie-testów">Ignorowanie testów</h3>

<p>JUnit 5 pozwala na ignorowanie testów. Najprostszym sposobem jest dodanie adnotacji <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Disabled.html"><code class="language-plaintext highlighter-rouge">@Disabled</code></a>.</p>

<h3 id="mechanizm-rozszerzeń">Mechanizm rozszerzeń</h3>

<p>JUnit 5 w odróżnieniu od JUnit 4 nie posiada <code class="language-plaintext highlighter-rouge">@Rule</code>, <code class="language-plaintext highlighter-rouge">@ClassRule</code> czy <code class="language-plaintext highlighter-rouge">@RunWith</code>. JUnit5 łączy te funkcjonalności w jedną. Ta funkcjonalność nazywa się rozszerzeniami. Główną adnotacją, która zarządza rozszerzeniami jest <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/extension/ExtendWith.html"><code class="language-plaintext highlighter-rouge">@ExtendWith</code></a>.</p>

<p>Adnotacja jako element akceptuje klasę implementującą interfejs <a href="https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/extension/Extension.html"><code class="language-plaintext highlighter-rouge">Extension</code></a>.</p>

<p>Mechanizm rozszerzeń jest głównie wykorzystywany wraz z innymi bibliotekami. Na przykład przez Spring do umożliwienia wstrzykiwania zależności czy przez Mockito do <a href="/testy-jednostkowe-z-uzyciem-mock-i-stub/">tworzenia mocków</a>.</p>

<h4 id="przykładowe-rozszerzenie">Przykładowe rozszerzenie</h4>

<p>Przykład poniżej pokazuje rozszerzenie, które wyświetla na konsoli napis <code class="language-plaintext highlighter-rouge">Samouczek extension :)</code>. Rozszerzenie to zostało zaaplikowane do jednego z testów:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SamouczekExtension</span> <span class="kd">implements</span> <span class="nc">BeforeEachCallback</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">beforeEach</span><span class="o">(</span><span class="nc">ExtensionContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Samouczek extension :)"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="nd">@ExtendWith</span><span class="o">(</span><span class="nc">SamouczekExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">shouldConvertZeroPoundValue</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">Kilogram</span> <span class="n">kilograms</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Pound</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">).</span><span class="na">toKilograms</span><span class="o">();</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ZERO</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="n">kilograms</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="tworzenie-własnych-adnotacji">Tworzenie własnych adnotacji</h3>

<p>JUnit 5 pozwala na <a href="/adnotacje-w-jezyku-java/">tworzenie własnych adnotacji</a> poprzez łączenie tych dostarczonych przez bibliotekę. W przykładzie poniżej możesz zobaczyć rozszerzenie, które przytoczyłem wyżej. Tym razem rozszerzenie to jest aplikowane przez dodanie własnej adnotacji <code class="language-plaintext highlighter-rouge">@SamouczekBefore</code> do metody z testem:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Target</span><span class="o">({</span> <span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="nc">ElementType</span><span class="o">.</span><span class="na">METHOD</span> <span class="o">})</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@ExtendWith</span><span class="o">(</span><span class="nc">SamouczekExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">SamouczekBefore</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="nd">@SamouczekBefore</span>
<span class="kt">void</span> <span class="nf">shouldConvert1Pound</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"0.4536"</span><span class="o">),</span> <span class="k">new</span> <span class="nc">Pound</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">).</span><span class="na">toKilograms</span><span class="o">().</span><span class="na">value</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Takie podejście pozwala na tworzenie bardziej czytelnych testów. Moim zdaniem jednak nie powinno się przesadzać z używaniem tej funkcjonalności. Może ona powodować trudności w zrozumieniu kodu przez programistów, którzy są nowi w danym projekcie.</p>

<h2 id="uruchamianie-testów-junit-5">Uruchamianie testów JUnit 5</h2>

<p>Jak wspomniałem wyżej różne narzędzia używały wewnętrznego API biblioteki JUnit do uruchamiania i wyświetlania wyników testów. W związku z tym zmiana wersji biblioteki JUnit wymaga także zmiany w różnych narzędziach. Aby używać JUnit 5 w IDE musi się ono poprawnie integrować z nową wersją biblioteki. Od jakiegoś już czasu główne IDE mają takie wsparcie:</p>

<ul>
  <li>IntelliJ Idea 2016.2</li>
  <li>Eclipse Oxygen</li>
</ul>

<h3 id="junit-5-z-gradle">JUnit 5 z Gradle</h3>

<p>Gradle od wersji 4.6 wspiera natywnie uruchamianie testów przy pomocy <em>JUnit Platform</em>. Dodanie kilku linijek do <code class="language-plaintext highlighter-rouge">build.gradle</code> pozwala na uruchamianie testów przy pomocy Gradle:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dependencies {
    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: '5.1.0'
    testRuntimeOnly group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: '5.1.0'
}

test {
    useJUnitPlatform()
}
</code></pre></div></div>

<h2 id="materiały-dodatkowe">Materiały dodatkowe</h2>

<p>JUnit 5 ma bardzo dobrą dokumentację. Na YouTube znajdziesz też całkiem sporo prezentacji, które opisują nowe podejście. Poniżej zebrałem dla Ciebie materiały, które są dobrym uzupełnieniem dla treści artykułu:</p>

<ul>
  <li><a href="https://junit.org/junit5/docs/current/user-guide/">Dokumentacja biblioteki JUnit</a>,</li>
  <li><a href="https://www.youtube.com/watch?v=0qI6_NKFQsY">Prezentacja z Devoxx prowadzona przez Lead Developer’a biblioteki JUnit</a>,</li>
  <li><a href="https://www.youtube.com/watch?v=-mIrA5cVfZ4">JUnit 5 z innej perspektywy, integracja ze Spring 5</a>,</li>
  <li><a href="https://www.indiegogo.com/projects/junit-lambda#/">Kampania na Indiegogo sponsorująca rozwój JUnit 5</a>,</li>
  <li><a href="https://github.com/SamouczekProgramisty/KursJava/tree/master/31_testy_jednostkowe_junit5">Kod źródłowy przykładów użytych w artykule</a>.</li>
</ul>

<h2 id="zadania-do-wykonania">Zadania do wykonania</h2>

<ol>
  <li>
    <p>Napisz program, który będzie pomagał w prowadzeniu kantoru. Kantor powinien obsługiwać wymianę trzech par walutowych:</p>

    <ul>
      <li>PLN – EUR,</li>
      <li>PLN – USD,</li>
      <li>EUR – USD.</li>
    </ul>

    <p>Właściciel kantoru z góry określa przelicznik referencyjny i spread dla każdej pary walutowej. W bardziej rozwiniętej wersji kantor powinien pobierać przelicznik referencyjny używając API. Możesz na przykład użyć <a href="https://fixer.io/">tego</a>.</p>

    <p>Napisz ten program używając podejścia <a href="/test-driven-development-na-przykladzie/">TDD</a>.</p>
  </li>
  <li>
    <p>Zrefaktoryzuj kod źródłowy przykładów użytych w artykule tak aby <code class="language-plaintext highlighter-rouge">Weight</code> było klasą, której konstruktor akceptuje dwa parametry:</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">WeightUnit unit</code> – <a href="/typ-wyliczeniowy-w-jezyku-java/">typ wyliczeniowy</a> określający rodzaj jednostki. Powinien mieć wartości <code class="language-plaintext highlighter-rouge">POUND</code> i <code class="language-plaintext highlighter-rouge">KILOGRAM</code>,</li>
      <li><code class="language-plaintext highlighter-rouge">BigDecimal value</code> – wartość wagi w danej jednostce.</li>
    </ul>

    <p>Dodatkowo klasa ta powinna zawierać metody:</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">Weight convert(WeightUnit convertTo)</code> – zwraca instancję <code class="language-plaintext highlighter-rouge">Weight</code> reprezentującą wagę w nowej jednostce,</li>
      <li><code class="language-plaintext highlighter-rouge">BigDecimal getValue()</code> – zwaraca wagę,</li>
      <li><code class="language-plaintext highlighter-rouge">WeightUnit getUnit()</code> – zwaraca jednostkę, w której wyrażona jest waga.</li>
    </ul>

    <p>Użyj istniejących testów i metodyki TDD do przeprowadzenia refaktoringu kodu.</p>
  </li>
</ol>

<p>Zachęcam Cię do samodzielnego rozwiązania zadań, wtedy nauczysz się najwięcej. Podziel się linkiem do swojego rozwiązania w komentarzu :).</p>

<p>Po rozwiązaniu zadań samodzielnie możesz rzucić okiem na <a href="https://github.com/SamouczekProgramisty/KursJava/tree/master/31_testy_jednostkowe_junit5/src/main/java/pl/samouczekprogramisty/kursjava/junit5/exchange">przykładowe rozwiązanie pierwszego zadania</a>. Użyłem w nim biblioteki Mockito, więcej o niej przeczytasz w osobnym artykule na temat <a href="/testy-jednostkowe-z-uzyciem-mock-i-stub/">pisania testów jednostkowych z użyciem mocków</a>.</p>

<h2 id="podsumowanie">Podsumowanie</h2>

<p>Po lekturze tego artykułu wiesz czym jest JUnit 5. Znasz komponenty składające się na tę bibliotekę. Rozwiązałeś zadanie, które pozwoliło Ci użyć JUnit 5 w praktyce. Od dzisiaj możesz zacząć pisać testy używając wyłącznie JUnit 5 ;). W artykule tym celowo pominąłem część funkcjonalności udostępnionych przez JUnit 5. Zachęcam Cię do zajrzenia do materiałów dodatkowych, szczególnie dokumentacji.</p>

<p>Jeśli masz jakiekolwiek pytania, proszę zadaj je w komentarzu. Jeśli nie chcesz ominąć kolejnych artykułów na blogu dopisz się do samouczkowego newslettera i polub Samouczka na Facebook’u. Do następnego razu!</p>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:solid" role="doc-endnote">
      <p>W oryginale SRP (ang. <em>Single Responsibility Principle</em>) to pierwsza literka z akronimu <a href="/solid-czyli-dobre-praktyki-w-programowaniu-obiektowym/">SOLID</a>. <a href="#fnref:solid" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:podzielone" role="doc-endnote">
      <p>Komponenty te są także podzielone na mniejsze elementy dystrybuowane w osobnych plikach JAR. <a href="#fnref:podzielone" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:typy" role="doc-endnote">
      <p>Metoda <code class="language-plaintext highlighter-rouge">assertAll</code> jest przeciążona i akceptuje różne rodzaje parametrów, zaczynając od “varargs” a na <a href="/strumienie-w-jezyku-java/">strumieniach</a> kończąc. <a href="#fnref:typy" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

        

<div class="notice--success text-center">
  
<p><span class="c_almost-header">Pobierz opracowania zadań z rozmów kwalifikacyjnych</span></p>

<p>Przygotowałem rozwiązania kilku zadań algorytmicznych z rozmów kwalifikacyjnych. Rozkładam je na czynniki pierwsze i pokazuję różne sposoby ich rozwiązania. Dołącz do grupy <strong>ponad 6147 Samouków</strong>, którzy jako pierwsi dowiadują się o nowych treściach na blogu, a prześlę je na Twój e-mail.</p>

<script type="text/javascript" src="https://static.mailerlite.com/data/webforms/698960/m0b4d5.js?v4"></script>


</div>

        
      </section>

      <footer class="page__meta">
        
        


  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Kategorie: </strong>
    <span itemprop="keywords">
    
      <a href="/kategorie/#programista-rzemie%C5%9Blnik" class="page__taxonomy-item" rel="tag">Programista rzemieślnik</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Ostatnia aktualizacja:</strong> <time datetime="2019-10-27">2019-10-27</time></p>
        
        <p><strong><i class="fas fa-fw fa-child" aria-hidden="true"></i> Autor: </strong><a href="/o-mnie/">Marcin Pietraszek</a></p>
        <hr />
        <p>
          Nie popełnia błędów tylko ten, kto nic nie robi ;). Bardzo możliwe, że znajdziesz błąd, literówkę, coś co wymaga poprawy. Jeśli chcesz możesz samodzielnie 
          <a href="https://github.com/SamouczekProgramisty/samouczekprogramisty.github.io/edit/source/_posts/2018-04-13-testy-jednostkowe-z-junit5.md">poprawić tę stronę</a>. Jeśli nie chcesz poprawiać błędu, który udało Ci się znaleźć będę wdzięczny jeśli go 
          <a href="https://github.com/SamouczekProgramisty/samouczekprogramisty.github.io/issues/new?title=Błąd%20na%20stronie:%20_posts/2018-04-13-testy-jednostkowe-z-junit5.md">zgłosisz</a>. Z góry dziękuję!
        </p>
      </footer>
    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Zostaw komentarz</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">Także może Ci się spodobać</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2019/02/02_watki_w_jezyku_java_artykul.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/watki-w-jezyku-java/" rel="permalink">Wątki w języku Java
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          10 minut(y)
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Artykuł ten opisuje wątki w języku Java. Po jego lekturze dowiesz się czym jest wątek, jaki ma cykl życia i jak go uruchomić. Dowiesz się czym jest synchroni...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2016/10/29_testy_jednostkowe_junit_artykul.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/testy-jednostkowe-z-junit/" rel="permalink">Testy jednostkowe z JUnit
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          11 minut(y)
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Artykuł ten poświęcony jest tematyce testów jednostkowych. Po jego przeczytaniu dowiesz się czym są testy jednostkowe i dlaczego są one istotne. Poznasz pods...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2019/04/20_jak_pisac_dobry_kod_w_javie_artykul.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/jak-pisac-kod-wysokiej-jakosci-w-jezyku-java/" rel="permalink">Jak pisać kod wysokiej jakości w języku Java
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          17 minut(y)
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">W artykule przeczytasz o tym czym jest konwencja nazewnicza. Dowiesz się jak jej stosować. Na przykładach pokażę Ci najczęściej popełniane błędy wraz z propo...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2018/09/22_testy_z_mock_i_stub_w_jezyku_java.jpeg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/testy-jednostkowe-z-uzyciem-mock-i-stub/" rel="permalink">Testy jednostkowe z użyciem mock i stub
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          12 minut(y)
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">W artykule tym przeczytasz o obiektach pomocniczych typu mock i stub używanych w testach jednostkowych. Poznasz różnice pomiędzy nimi. Zobaczysz przykłady ta...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="search-searchbar"></div>
  <div class="search-hits"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">

    
      <li><strong>Śledź:</strong></li>
    

    
      
        
          <li><a href="https://www.facebook.com/SamouczekProgramisty" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/SamouczekProgramisty" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.youtube.com/channel/UCisPQ5nxB6yw3SfJPFWKTEg" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-youtube" aria-hidden="true"></i> YouTube</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>

  <ul>
    <li><a href="https://www.samouczekprogramisty.pl/o-mnie/">O mnie</a></li>
    <li><a href="https://www.samouczekprogramisty.pl/o-blogu/">O blogu</a></li>
    <li><a href="https://www.samouczekprogramisty.pl/polityka-prywatnosci/">Polityka prywatności</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2015-2022 Marcin Pietraszek</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>


<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'BAIWADE3K7',
  apiKey: '4a78df6a4d9f820ebbdb0a35f834b174',
  indexName: 'prod_samouczek',
  searchParameters: {
    restrictSearchableAttributes: [
      'title',
      'content'
    ]
  }
});

const hitTemplate = function(hit) {
  const url = hit.url;
  const title = hit._highlightResult.title.value;
  const content = hit._highlightResult.html.value;

  return `
    <div class="list__item">
      <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
        <h2 class="archive__item-title" itemprop="headline"><a href="${url}">${title}</a></h2>
        <div class="archive__item-excerpt" itemprop="description">${content}</div>
      </article>
    </div>
  `;
}

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '.search-searchbar',
    poweredBy: true,
    placeholder: 'Szukaj...'
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '.search-hits',
    templates: {
      item: hitTemplate,
      empty: 'Brak wyników',
    }
  })
);

// Starting the search only when toggle is clicked
$(document).ready(function () {
  $(".search__toggle").on("click", function() {
    if(!search.started) {
      search.start();
    }
  });
});
</script>





  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-68536783-1']);
  
    _gaq.push(['_gat._anonymizeIp']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://www.samouczekprogramisty.pl/testy-jednostkowe-z-junit5/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = ""; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://samouczekprogramisty.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Proszę włacz obsługę JavaScript żeby móc zobaczyć komentarze.</noscript>


  





  </body>
</html>
